function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (typeof call === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["pages-submit-project-submit-project-module"], {
  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/submit-project/submit-project.component.html":
  /*!**********************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/submit-project/submit-project.component.html ***!
    \**********************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesSubmitProjectSubmitProjectComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<div class=\"p-3\">\r\n  <div class=\"theme-container\">\r\n\r\n    <form name=\"form\" (ngSubmit)=\"f.form.valid && save()\" #f=\"ngForm\" validate>\r\n\r\n      <mat-card ngClass.lt-lg=\"p-0\" *ngIf=\"!done&&!tokenStorage.hasToken()\">\r\n\r\n        <div fxLayout=\"row wrap\">\r\n          <div fxFlex=\"100\" fxFlex.gt-sm=\"100\" class=\"p-3\">\r\n            <h1>{{'COMMON.CONNECT_TO_SUBMIT' | translate }}</h1>\r\n          </div>\r\n        </div>\r\n        <div fxLayout=\"row wrap\">\r\n          <div fxFlex=\"100\" fxFlex.gt-sm=\"50\" class=\"p-3\">\r\n            <div fxLayout=\"column\" fxLayoutAlign=\"center center\" class=\"text-center\">\r\n              <a mat-raised-button [routerLink]=\"['/login', '1']\" color=\"accent\" class=\"w-100\">\r\n                {{'COMMON.SIGN_IN' | translate }}</a>\r\n            </div>\r\n          </div>\r\n\r\n          <div fxFlex=\"100\" fxFlex.gt-sm=\"50\" class=\"p-3\">\r\n            <div fxLayout=\"column\" fxLayoutAlign=\"center center\" class=\"text-center\">\r\n              <a mat-raised-button [routerLink]=\"['/register', '1']\" color=\"accent\"\r\n                class=\"w-100\">{{'COMMON.NEW_REGISTER' | translate }}</a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n      </mat-card>\r\n\r\n      <mat-card ngClass.lt-lg=\"p-0\" *ngIf=\"done&&tokenStorage.hasToken()\">\r\n\r\n        <div fxLayout=\"row wrap\">\r\n          <div fxFlex=\"100\" fxFlex.gt-sm=\"100\" class=\"p-3\">\r\n            <h2 style=\"color: green;\">{{'MESSAGE.PROJECT_SUBMITTED' | translate }}</h2>\r\n            <br/>\r\n            <a mat-button [routerLink]=\"['/account/project-list']\" color=\"primary\"\r\n                        class=\"w-100\">{{'MESSAGE.CONNECT_EDIT_PROJECT' | translate }}</a>\r\n          </div> \r\n        </div>\r\n      </mat-card>\r\n\r\n      <mat-card ngClass.lt-lg=\"p-0\" *ngIf=\"!done&&tokenStorage.hasToken()\">\r\n        <!--   <div fxLayout=\"row wrap\">\r\n          <div fxFlex=\"100\" fxFlex.gt-sm=\"100\" class=\"h-100 w-100 text-right\">\r\n            <button type=\"submit\" mat-raised-button color=\"primary\">\r\n              <span>{{horizontalStepper.selectedIndex < 5?('COMMON.NEXT'|translate):('COMMON.SUBMIT_PROJECT'|translate)}}</span>\r\n              <span class=\"material-icons\">\r\n                navigate_next\r\n              </span>\r\n            </button>\r\n          </div>\r\n        </div> -->\r\n        <mat-horizontal-stepper #horizontalStepper linear=\"true\" class=\"submit-project\"\r\n          (selectionChange)=\"onSelectionChange($event)\">\r\n          <mat-step label=\"Presentation\">\r\n            <div class=\"step-content\">\r\n              <div fxLayout=\"row wrap\">\r\n                <div fxFlex=\"100\" fxFlex.gt-sm=\"33\" class=\"p-3\">\r\n                  <mat-form-field appearance=\"outline\" class=\"w-100\">\r\n                    <mat-label> {{'COMMON.TITLE' | translate}}\r\n                    </mat-label>\r\n                    <input matInput type=\"text\" class=\"form-control\" id=\"title\" [(ngModel)]=\"project.title\" name=\"title\"\r\n                      #title=\"ngModel\" required>\r\n                    <mat-error *ngIf=\"f.submitted && title.invalid\" severity=\"error\">\r\n                      {{ 'VALIDATION.FIELD_REQUIRED' | translate }}\r\n                    </mat-error>\r\n                  </mat-form-field>\r\n                </div>\r\n                <div fxFlex=\"100\" fxFlex.gt-sm=\"33\" class=\"p-3\">\r\n                  <mat-form-field appearance=\"outline\" class=\"w-100\">\r\n                    <mat-label> {{'COMMON.PROJECT_LOCATION' | translate}}\r\n                    </mat-label>\r\n                    <input matInput type=\"text\" class=\"form-control\" id=\"location\" [(ngModel)]=\"project.location\"\r\n                      name=\"location\" #location=\"ngModel\" required>\r\n                    <mat-error *ngIf=\"f.submitted && title.invalid\" severity=\"error\">\r\n                      {{ 'VALIDATION.FIELD_REQUIRED' | translate }}\r\n                    </mat-error>\r\n                  </mat-form-field>\r\n                </div>\r\n\r\n                <div fxFlex=\"100\" fxFlex.gt-sm=\"33\" class=\"p-3\">\r\n                  <mat-form-field appearance=\"outline\" class=\"w-100\">\r\n                    <mat-label> {{'COMMON.BUDGET' | translate}}\r\n                    </mat-label>\r\n                    <input matInput type=\"text\" class=\"form-control\" id=\"budget\" [(ngModel)]=\"project.budget\"\r\n                      name=\"budget\" #budget=\"ngModel\" required>\r\n                    <mat-error *ngIf=\"f.submitted && budget.invalid\" severity=\"error\">\r\n                      {{ 'VALIDATION.FIELD_REQUIRED' | translate }}\r\n                    </mat-error>\r\n                  </mat-form-field>\r\n                </div>\r\n              </div>\r\n\r\n              <div fxLayout=\"row wrap\">\r\n                <div fxFlex=\"100\" fxFlex.gt-sm=\"33\" class=\"p-3\">\r\n                  <mat-form-field appearance=\"outline\" class=\"w-100\">\r\n                    <mat-label> {{'COMMON.PROJECT_DURATION' | translate}}\r\n                    </mat-label>\r\n                    <input matInput type=\"text\" class=\"form-control\" id=\"duration\" [(ngModel)]=\"project.duration\"\r\n                      name=\"duration\" #duration=\"ngModel\">                 \r\n                  </mat-form-field>\r\n                </div>\r\n                <div fxFlex=\"100\" fxFlex.gt-sm=\"33\" class=\"p-3\">\r\n                  <mat-form-field class=\"w-100\">\r\n                    <mat-label> {{'COMMON.PROJECTED_START_DATE' | translate}}</mat-label><br />\r\n                    <input matInput [matDatepicker]=\"projectedStartDatePicker\" class=\"form-control\"\r\n                      id=\"projectedStartDate\" [(ngModel)]=\"project.projectedStartDate\" name=\"projectedStartDate\"\r\n                      #projectedStartDate=\"ngModel\">\r\n                    <mat-datepicker-toggle matSuffix [for]=\"projectedStartDatePicker\"></mat-datepicker-toggle>\r\n                    <mat-datepicker #projectedStartDatePicker></mat-datepicker>\r\n                  </mat-form-field>\r\n                </div>\r\n                <div fxFlex=\"100\" fxFlex.gt-sm=\"33\" class=\"p-3\">\r\n                  <mat-form-field class=\"w-100\">\r\n                    <mat-label> {{'COMMON.PROJECTED_END_DATE' | translate}}</mat-label><br />\r\n                    <input matInput [matDatepicker]=\"projectedEndDatePicker\" class=\"form-control\" id=\"projectedEndDate\"\r\n                      [(ngModel)]=\"project.projectedEndDate\" name=\"projectedEndDate\" #projectedEndDate=\"ngModel\">\r\n                    <mat-datepicker-toggle matSuffix [for]=\"projectedEndDatePicker\"></mat-datepicker-toggle>\r\n                    <mat-datepicker #projectedEndDatePicker></mat-datepicker>\r\n                  </mat-form-field>\r\n                </div>\r\n              </div>\r\n              <div fxLayout=\"row wrap\">\r\n                <div fxFlex=\"100\" fxFlex.gt-sm=\"100\" class=\"p-3\">\r\n                  <mat-label> {{'MESSAGE.PROJECT_DESCRIPTION' | translate}} <font color=\"red\">*</font>\r\n                  </mat-label>\r\n                  <quill-editor class=\"form-control\" id=\"description\" [(ngModel)]=\"project.description\"\r\n                    name=\"description\" #description=\"ngModel\" required></quill-editor>\r\n                  <mat-error *ngIf=\"f.submitted && description.invalid\" severity=\"error\">\r\n                    {{ 'VALIDATION.FIELD_REQUIRED' | translate }}\r\n                  </mat-error>\r\n                </div>\r\n              </div>\r\n              <div fxLayout=\"row wrap\">\r\n                <div fxFlex=\"100\" fxFlex.gt-sm=\"100\" class=\"p-3\">\r\n                  <mat-label> {{'MESSAGE.PROJECT_OBJECTIVE' | translate}}<font color=\"red\">*\r\n                    </font>\r\n                  </mat-label>\r\n                  <quill-editor class=\"form-control\" id=\"description\" [(ngModel)]=\"project.objectif\" name=\"objectif\"\r\n                    #objectif=\"ngModel\" required></quill-editor>\r\n                  <mat-error *ngIf=\"f.submitted && objectif.invalid\" severity=\"error\">\r\n                    {{ 'VALIDATION.FIELD_REQUIRED' | translate }}\r\n                  </mat-error>\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n          </mat-step>\r\n\r\n          <mat-step label=\"Innovation\">\r\n            <div class=\"step-content\">\r\n              <div fxLayout=\"row wrap\">\r\n                <div fxFlex=\"100\" fxFlex.gt-sm=\"100\" class=\"p-3\">\r\n                  <mat-label> {{'MESSAGE.PROJECT_INOV' | translate}}\r\n                    <font color=\"red\"><strong>*</strong></font>\r\n                  </mat-label>\r\n                  <quill-editor class=\"form-control\" id=\"inovation\" [(ngModel)]=\"project.inovation\" name=\"inovation\"\r\n                    #inovation=\"ngModel\"></quill-editor>\r\n                </div>\r\n              </div>\r\n              <div fxLayout=\"row wrap\">\r\n                <div fxFlex=\"100\" fxFlex.gt-sm=\"100\" class=\"p-3\">\r\n                  <mat-label> {{'MESSAGE.PROJECT_EXISTANT' | translate}}\r\n                    <font color=\"red\"><strong>*</strong></font>\r\n                  </mat-label>\r\n                  <quill-editor class=\"form-control\" id=\"existant\" [(ngModel)]=\"project.existant\" name=\"existant\"\r\n                    #existant=\"ngModel\"></quill-editor>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </mat-step>\r\n\r\n\r\n        <mat-step label=\"{{'COMMON.SWAT'|translate}}\">\r\n            <div class=\"step-content\">\r\n              <div fxLayout=\"row wrap\">\r\n                <div fxFlex=\"100\" fxFlex.gt-sm=\"100\" class=\"p-3\">\r\n                  <mat-label> {{'MESSAGE.PROJECT_RESOURCE' | translate}}\r\n                    <font color=\"red\"><strong>*</strong></font>\r\n                  </mat-label>\r\n                  <quill-editor class=\"form-control\" id=\"resource\" [(ngModel)]=\"project.resource\" name=\"resource\"\r\n                    #resource=\"ngModel\"></quill-editor>\r\n                </div>\r\n              </div>\r\n              <div fxLayout=\"row wrap\">\r\n                <div fxFlex=\"100\" fxFlex.gt-sm=\"100\" class=\"p-3\">\r\n                  <mat-label> {{'MESSAGE.PROJECT_RISK' | translate}}\r\n                    <font color=\"red\"><strong>*</strong></font>\r\n                  </mat-label>\r\n                  <quill-editor class=\"form-control\" id=\"constraints\" [(ngModel)]=\"project.constraints\"\r\n                    name=\"constraints\" #constraints=\"ngModel\"></quill-editor>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </mat-step>\r\n\r\n        <mat-step label=\"{{'COMMON.RESULT_BUDGET'|translate}}\">\r\n            <div class=\"step-content\">\r\n              <div fxLayout=\"row wrap\">\r\n                <div fxFlex=\"100\" fxFlex.gt-sm=\"100\" class=\"p-3\">\r\n                  <mat-label> {{'MESSAGE.PROJECT_BUDGET' | translate}}\r\n                    <font color=\"red\"><strong>*</strong></font>\r\n                  </mat-label>\r\n                  <quill-editor class=\"form-control\" id=\"budgetLine\" [(ngModel)]=\"project.budgetLine\" name=\"budgetLine\"\r\n                    #budgetLine=\"ngModel\"></quill-editor>\r\n                </div>\r\n              </div>\r\n              <div fxLayout=\"row wrap\">\r\n                <div fxFlex=\"100\" fxFlex.gt-sm=\"100\" class=\"p-3\">\r\n                  <mat-label> {{'MESSAGE.PROJECT_RESULT' | translate}}\r\n                    <font color=\"red\"><strong>*</strong></font>\r\n                  </mat-label>\r\n                  <quill-editor class=\"form-control\" id=\"result\" [(ngModel)]=\"project.result\" name=\"result\"\r\n                    #result=\"ngModel\"></quill-editor>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </mat-step>\r\n\r\n        <mat-step label=\"{{'COMMON.EXEC_FEASIBILITY'|translate}}\">\r\n            <div class=\"step-content\">\r\n              <div fxLayout=\"row wrap\">\r\n                <div fxFlex=\"100\" fxFlex.gt-sm=\"100\" class=\"p-3\">\r\n                  <mat-label> {{'MESSAGE.PROJECT_FEASIBILITY' | translate}}\r\n                    <font color=\"red\"><strong>*</strong></font>\r\n                  </mat-label>\r\n                  <quill-editor class=\"form-control\" id=\"feasibility\" [(ngModel)]=\"project.feasibility\"\r\n                    name=\"feasibility\" #feasibility=\"ngModel\"></quill-editor>\r\n                </div>\r\n              </div>\r\n              <div fxLayout=\"row wrap\">\r\n                <div fxFlex=\"100\" fxFlex.gt-sm=\"100\" class=\"p-3\">\r\n                  <mat-label> {{'MESSAGE.PROJECT_EXECUTION' | translate}}\r\n                    <font color=\"red\"><strong>*</strong></font>\r\n                  </mat-label>\r\n                  <quill-editor class=\"form-control\" id=\"execution\" [(ngModel)]=\"project.execution\" name=\"execution\"\r\n                    #execution=\"ngModel\"></quill-editor>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </mat-step>\r\n          <mat-step label=\"Media\">\r\n            <div class=\"step-content\">\r\n\r\n              <div fxLayout=\"row wrap\">\r\n                <div fxFlex=\"100\" fxFlex.gt-sm=\"100\" class=\"p-3\">\r\n                  <p class=\"mb-0\"><span class=\"uppercase fw-500\">{{'COMMON.PICTURE' | translate}}</span><span\r\n                      class=\"text-muted mx-3\">(max: 20 images)</span></p>\r\n                  <input-file [(ngModel)]=\"files\" name=\"gallery\" #gallery=\"ngModel\" fileLimit=\"20\" fileAccept=\"image/*\"\r\n                    [linkEnabled]=\"false\" multiple>\r\n                  </input-file>\r\n                </div>\r\n              </div>\r\n\r\n              <div fxLayout=\"row wrap\">\r\n                <div fxFlex=\"100\" fxFlex.gt-sm=\"100\" class=\"p-3\">\r\n                  <div fxLayout=\"row wrap\">\r\n                    <div fxFlex=\"100\" fxLayoutAlign=\"start center\" class=\"my-3 px-2\">\r\n                      <p class=\"mb-0\"><span class=\"uppercase fw-500\">{{'COMMON.VIDEO' | translate}}</span><span\r\n                          class=\"text-muted mx-3\">( {{'COMMON.YOUTUBE_LINK'|translate}})</span></p>\r\n                      <button type=\"button\" mat-icon-button color=\"primary\" (click)=\"addVideo()\"\r\n                        matTooltip=\"{{'COMMON.ADD_VIDEO'|translate}}\" matTooltipPosition=\"after\">\r\n                        <mat-icon>add_circle</mat-icon>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                  <div fxLayout=\"row wrap\">\r\n                      <div *ngFor=\"let video of project.videos; let i = index;\" fxFlex=\"100\" fxFlex.gt-sm=\"100\" class=\"step-section\">\r\n                        <div fxFlex=\"4\" class=\"fw-500 text-center pt-3\">{{i+1}}.</div>\r\n                        <div fxFlex=\"90\" fxLayout=\"row wrap\">\r\n                          <mat-form-field appearance=\"outline\" fxFlex=\"100\" fxFlex.gt-xs=\"40\" class=\"px-2\">\r\n                            <mat-label>{{'COMMON.NAME' | translate}}</mat-label>\r\n                            <input matInput placeholder=\"{{'COMMON.NAME' | translate}}\" [(ngModel)]=\"video.name\"\r\n                              name=\"videoName + {{i}}\" autocomplete=\"off\">\r\n                          </mat-form-field>\r\n                          <mat-form-field appearance=\"outline\" fxFlex=\"100\" fxFlex.gt-xs=\"60\" class=\"px-2\">\r\n                            <mat-label>{{'COMMON.LINK' | translate}}</mat-label>\r\n                            <input matInput placeholder=\"{{'COMMON.LINK_TO_VIDEO' | translate}}\"\r\n                              [(ngModel)]=\"video.link\" name=\"videoLink + {{i}}\" autocomplete=\"off\">\r\n                          </mat-form-field>\r\n                        </div>\r\n                        <div fxFlex=\"6\" class=\"text-center pt-2\">\r\n                          <button type=\"button\" mat-icon-button color=\"warn\" (click)=\"deleteVideo(video.id, i)\"\r\n                            matTooltip=\"{{'COMMON.DELETE' | translate}}\">\r\n                            <mat-icon>cancel</mat-icon>\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    \r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n          </mat-step>\r\n        </mat-horizontal-stepper>\r\n        <div fxLayout=\"row wrap\" *ngIf=\"canEdit()||isAdmin()\">\r\n          <div fxFlex=\"100\" fxFlex.gt-sm=\"100\" class=\"h-100 w-100 text-right\">\r\n            <h2 *ngIf=\"messages\" style=\"color: green;\"> {{messages}} </h2>\r\n            <h2 *ngIf=\"error\" style=\"color: red;\"> {{error}} </h2>\r\n            <button type=\"submit\" mat-raised-button color=\"primary\">\r\n              <span>{{horizontalStepper.selectedIndex < 5?('COMMON.NEXT'|translate):('COMMON.SUBMIT_PROJECT'|translate)}}</span>\r\n              <span class=\"material-icons\">\r\n                navigate_next\r\n              </span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </mat-card>\r\n    </form>\r\n\r\n  </div>\r\n</div>";
    /***/
  },

  /***/
  "./src/app/pages/submit-project/submit-project.component.scss":
  /*!********************************************************************!*\
    !*** ./src/app/pages/submit-project/submit-project.component.scss ***!
    \********************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesSubmitProjectSubmitProjectComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3N1Ym1pdC1wcm9qZWN0L3N1Ym1pdC1wcm9qZWN0LmNvbXBvbmVudC5zY3NzIn0= */";
    /***/
  },

  /***/
  "./src/app/pages/submit-project/submit-project.component.ts":
  /*!******************************************************************!*\
    !*** ./src/app/pages/submit-project/submit-project.component.ts ***!
    \******************************************************************/

  /*! exports provided: SubmitProjectComponent */

  /***/
  function srcAppPagesSubmitProjectSubmitProjectComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "SubmitProjectComponent", function () {
      return SubmitProjectComponent;
    });
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
    /* harmony import */


    var _angular_material_stepper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/material/stepper */
    "./node_modules/@angular/material/__ivy_ngcc__/fesm2015/stepper.js");
    /* harmony import */


    var src_app_app_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! src/app/app.service */
    "./src/app/app.service.ts");
    /* harmony import */


    var src_app_app_models__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! src/app/app.models */
    "./src/app/app.models.ts");
    /* harmony import */


    var _angular_material_paginator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! @angular/material/paginator */
    "./node_modules/@angular/material/__ivy_ngcc__/fesm2015/paginator.js");
    /* harmony import */


    var _angular_material_sort__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! @angular/material/sort */
    "./node_modules/@angular/material/__ivy_ngcc__/fesm2015/sort.js");
    /* harmony import */


    var src_app_app_settings__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! src/app/app.settings */
    "./src/app/app.settings.ts");
    /* harmony import */


    var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
    /*! @ngx-translate/core */
    "./node_modules/@ngx-translate/core/__ivy_ngcc__/fesm2015/ngx-translate-core.js");
    /* harmony import */


    var src_app_token_storage__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
    /*! src/app/token.storage */
    "./src/app/token.storage.ts");
    /* harmony import */


    var _angular_router__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(
    /*! @angular/router */
    "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
    /* harmony import */


    var ng2_cookies_ng2_cookies__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(
    /*! ng2-cookies/ng2-cookies */
    "./node_modules/ng2-cookies/ng2-cookies.js");
    /* harmony import */


    var ng2_cookies_ng2_cookies__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(ng2_cookies_ng2_cookies__WEBPACK_IMPORTED_MODULE_10__);
    /* harmony import */


    var src_app_shared_baseComponent__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(
    /*! src/app/shared/baseComponent */
    "./src/app/shared/baseComponent.ts");

    var __decorate = undefined && undefined.__decorate || function (decorators, target, key, desc) {
      var c = arguments.length,
          r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,
          d;
      if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {
        if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
      }
      return c > 3 && r && Object.defineProperty(target, key, r), r;
    };

    var __metadata = undefined && undefined.__metadata || function (k, v) {
      if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
    };

    var __importDefault = undefined && undefined.__importDefault || function (mod) {
      return mod && mod.__esModule ? mod : {
        "default": mod
      };
    }; /// <reference types="@types/googlemaps" />


    var SubmitProjectComponent = /*#__PURE__*/function (_src_app_shared_baseC) {
      _inherits(SubmitProjectComponent, _src_app_shared_baseC);

      var _super = _createSuper(SubmitProjectComponent);

      function SubmitProjectComponent(appService, appSettings, translate, tokenStorage, activatedRoute) {
        var _this;

        _classCallCheck(this, SubmitProjectComponent);

        _this = _super.call(this, translate, tokenStorage);
        _this.appService = appService;
        _this.appSettings = appSettings;
        _this.translate = translate;
        _this.tokenStorage = tokenStorage;
        _this.activatedRoute = activatedRoute;
        _this.toolbarTypes = [1, 2];
        _this.headerTypes = ['default', 'image', 'carousel'];
        _this.flags = [{
          name: 'Francais',
          image: 'assets/images/flags/fr.svg',
          code: 'fr'
        }, {
          name: 'English',
          image: 'assets/images/flags/gb.svg',
          code: 'en'
        }];
        _this.project = new src_app_app_models__WEBPACK_IMPORTED_MODULE_3__["Project"]();
        _this.projects = [];
        _this.done = false;
        return _this;
      }

      _createClass(SubmitProjectComponent, [{
        key: "changeLang",
        value: function changeLang(flag) {
          this.flag = flag;

          if (this.project === null) {
            this.clear();
          }
        }
      }, {
        key: "deleteFile",
        value: function deleteFile(project, fileName) {
          var _this2 = this;

          var vo = {
            id: project.id,
            name: fileName
          };
          this.appService.deleteFile('Project', vo).subscribe(function () {
            _this2.removeElement(_this2.project.fileNames, fileName);
          });
        }
      }, {
        key: "ngOnInit",
        value: function ngOnInit() {
          var _this3 = this;

          var lang = navigator.language;

          if (lang) {
            lang = lang.substring(0, 2);
          }

          if (ng2_cookies_ng2_cookies__WEBPACK_IMPORTED_MODULE_10__["Cookie"].get('lang')) {
            lang = ng2_cookies_ng2_cookies__WEBPACK_IMPORTED_MODULE_10__["Cookie"].get('lang');
            console.log('Using cookie lang=' + ng2_cookies_ng2_cookies__WEBPACK_IMPORTED_MODULE_10__["Cookie"].get('lang'));
          } else if (lang) {
            console.log('Using browser lang=' + lang); // this.translate.use(lang);
          } else {
            lang = 'fr';
            console.log('Using default lang=fr');
          }

          if (lang === 'fr') {
            this.flag = this.flags[0];
          } else {
            this.flag = this.flags[1];
          }

          this.activatedRoute.params.subscribe(function (params) {
            if (params.id === '0') {
              _this3.clear();

              _this3.getUserOpenProject();
            } else {
              _this3.getProject(params.id);
            }
          });
        }
      }, {
        key: "getUserOpenProject",
        value: function getUserOpenProject() {
          var _this4 = this;

          if (this.tokenStorage.getUserId()) {
            var parameters = [];
            parameters.push('e.user.id = |abc|' + this.tokenStorage.getUserId() + '|Long');
            parameters.push('e.status = |efg|0|Integer');
            this.appService.getAllByCriteriaWithFiles('Project', parameters).subscribe(function (data) {
              if (data && data.length > 0) {
                _this4.project = data[0];

                _this4.getProject(_this4.project.id);

                console.log(_this4.project);
              }
            });
          }
        }
      }, {
        key: "addVideo",
        value: function addVideo() {
          if (!this.project.videos) {
            this.project.videos = [];
          }

          this.project.videos.push(new src_app_app_models__WEBPACK_IMPORTED_MODULE_3__["Video"]());
        }
      }, {
        key: "deleteVideo",
        value: function deleteVideo(id, index) {
          var _this5 = this;

          if (id === undefined || id === null) {
            this.removeItem(this.project.videos, id);
            return;
          }

          this.appService["delete"](id, 'com.wack.model.Video').subscribe(function (data) {
            _this5.removeItem(_this5.project.videos, id);

            _this5.processDeleteResult(data, _this5.messages);
          });
        }
      }, {
        key: "getProject",
        value: function getProject(projectId) {
          var _this6 = this;

          this.appService.getOneWithChildsAndFiles(projectId, 'Project').subscribe(function (result) {
            if (result.id > 0) {
              _this6.project = result;
              console.log(_this6.project);
              var images = [];

              _this6.project.fileNames.forEach(function (item) {
                var image = {
                  link: 'assets/images/projects/' + projectId + '/' + item,
                  preview: 'assets/images/projects/' + projectId + '/' + item
                };
                images.push(image);
              });

              _this6.files = images;
            } else {
              _this6.translate.get(['COMMON.READ', 'MESSAGE.READ_FAILED']).subscribe(function (res) {
                _this6.messages = res['MESSAGE.READ_FAILED'];
              });
            }
          });
        }
      }, {
        key: "save",
        value: function save() {
          var _this7 = this;

          this.messages = '';
          this.error = '';
          var almostDone = false;

          if (this.horizontalStepper.selectedIndex < 5) {
            if (this.horizontalStepper.selectedIndex === 0) {
              if (!this.project.title || this.project.title.length < 1 || !this.project.location || this.project.location.length < 1 || !this.project.budget || !(this.project.budget > 0) || !this.project.duration || this.project.duration.length < 1 || !this.project.description || this.project.description.length < 1 || !this.project.objectif || this.project.objectif.length < 1) {
                this.translate.get(['VALIDATION.FILL_FIELD_MARKED', 'COMMON.ERROR']).subscribe(function (res) {
                  _this7.error = res['VALIDATION.FILL_FIELD_MARKED'];
                });
              } else {
                this.horizontalStepper.selectedIndex++;
              }
            } else if (this.horizontalStepper.selectedIndex === 1) {
              if (!this.project.inovation || this.project.inovation.length < 1 || !this.project.existant || this.project.existant.length < 1) {
                this.translate.get(['VALIDATION.FILL_FIELD_MARKED', 'COMMON.ERROR']).subscribe(function (res) {
                  _this7.error = res['VALIDATION.FILL_FIELD_MARKED'];
                });
              } else {
                this.horizontalStepper.selectedIndex++;
              }
            } else if (this.horizontalStepper.selectedIndex === 2) {
              if (!this.project.resource || this.project.resource.length < 1 || !this.project.constraints || this.project.constraints.length < 1) {
                this.translate.get(['VALIDATION.FILL_FIELD_MARKED', 'COMMON.ERROR']).subscribe(function (res) {
                  _this7.error = res['VALIDATION.FILL_FIELD_MARKED'];
                });
              } else {
                this.horizontalStepper.selectedIndex++;
              }
            } else if (this.horizontalStepper.selectedIndex === 3) {
              if (!this.project.budgetLine || this.project.budgetLine.length < 1 || !this.project.result || this.project.result.length < 1) {
                this.translate.get(['VALIDATION.FILL_FIELD_MARKED', 'COMMON.ERROR']).subscribe(function (res) {
                  _this7.error = res['VALIDATION.FILL_FIELD_MARKED'];
                });
              } else {
                this.horizontalStepper.selectedIndex++;
              }
            } else if (this.horizontalStepper.selectedIndex === 4) {
              if (!this.project.feasibility || this.project.feasibility.length < 1 || !this.project.execution || this.project.execution.length < 1) {
                this.translate.get(['VALIDATION.FILL_FIELD_MARKED', 'COMMON.ERROR']).subscribe(function (res) {
                  _this7.error = res['VALIDATION.FILL_FIELD_MARKED'];
                });
              } else {
                this.horizontalStepper.selectedIndex++;
              }
            }
          } else {
            almostDone = true;
          }

          console.log(this.error);

          if (!this.error) {
            console.log('Passed ' + this.error);
            this.project.modifiedBy = +this.tokenStorage.getUserId();

            if (this.project.user && this.project.user.id > 0) {// do nothing
            } else {
              var u = new src_app_app_models__WEBPACK_IMPORTED_MODULE_3__["User"]();
              u.id = Number(this.tokenStorage.getUserId());
              this.project.user = u;
            }

            this.formData = new FormData();
            this.project.remainingFileNames = []; // tslint:disable-next-line: prefer-for-of

            for (var i = 0; i < this.files.length; i++) {
              if (this.files[i].file) {
                console.log('Additional file added: ' + 'picture.' + this.files[i].file.name);
                this.formData.append('file[]', this.files[i].file, 'picture.' + this.files[i].file.name);
              } else {
                console.log(this.files[i]);
                var pathSplitArray = this.files[i].link.split('/');
                this.project.remainingFileNames.push(pathSplitArray[pathSplitArray.length - 1]);
              }
            }

            if (!(this.project.status && this.project.status > 0)) {
              this.project.status = 0;
            }

            if (this.files.length > 0) {
              this.appService.saveWithFile(this.project, 'Project', this.formData, 'saveWithFile').subscribe(function (result) {
                if (result.id > 0) {
                  console.log('saveWithFile');
                  _this7.project = result;
                  console.log('Index = ' + _this7.horizontalStepper.selectedIndex);

                  if (almostDone) {
                    _this7.done = true;
                  } else {
                    _this7.translate.get(['MESSAGE.DATA_SAVED', 'COMMON.SUCCESS']).subscribe(function (res) {
                      _this7.messages = res['MESSAGE.DATA_SAVED'];
                    });
                  }
                } else {
                  _this7.translate.get(['MESSAGE.DATA_SAVED_FAILED', 'COMMON.ERROR']).subscribe(function (res) {
                    _this7.error = res['MESSAGE.DATA_SAVED_FAILED'];
                  });
                }
              });
            } else {
              this.appService.save(this.project, 'Project').subscribe(function (result) {
                if (result.id > 0) {
                  _this7.project = result;
                  console.log('Saved');
                  console.log('Index = ' + _this7.horizontalStepper.selectedIndex);

                  if (almostDone) {
                    _this7.done = true;
                  } else {
                    _this7.translate.get(['MESSAGE.DATA_SAVED', 'COMMON.SUCCESS']).subscribe(function (res) {
                      _this7.messages = res['MESSAGE.DATA_SAVED'];
                    });
                  }
                } else {
                  _this7.translate.get(['MESSAGE.DATA_SAVED_FAILED', 'COMMON.ERROR']).subscribe(function (res) {
                    _this7.error = res['MESSAGE.DATA_SAVED_FAILED'];
                  });
                }
              });
            }
          }
        }
      }, {
        key: "canEdit",
        value: function canEdit() {
          return this.tokenStorage.hasToken() && this.project && (!(this.project.id > 0) || this.project.id > 0 && this.project.status === 0 && Number(this.tokenStorage.getUserId()) === this.project.user.id);
        }
      }, {
        key: "isAdmin",
        value: function isAdmin() {
          return this.tokenStorage.hasToken() && this.project && this.tokenStorage.getRole() !== '30';
        }
      }, {
        key: "clear",
        value: function clear() {
          this.project = new src_app_app_models__WEBPACK_IMPORTED_MODULE_3__["Project"]();
        }
      }, {
        key: "onSelectionChange",
        value: function onSelectionChange($event) {}
      }]);

      return SubmitProjectComponent;
    }(src_app_shared_baseComponent__WEBPACK_IMPORTED_MODULE_11__["BaseComponent"]);

    SubmitProjectComponent.ctorParameters = function () {
      return [{
        type: src_app_app_service__WEBPACK_IMPORTED_MODULE_2__["AppService"]
      }, {
        type: src_app_app_settings__WEBPACK_IMPORTED_MODULE_6__["AppSettings"]
      }, {
        type: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__["TranslateService"]
      }, {
        type: src_app_token_storage__WEBPACK_IMPORTED_MODULE_8__["TokenStorage"]
      }, {
        type: _angular_router__WEBPACK_IMPORTED_MODULE_9__["ActivatedRoute"]
      }];
    };

    __decorate([Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('horizontalStepper'), __metadata("design:type", _angular_material_stepper__WEBPACK_IMPORTED_MODULE_1__["MatStepper"])], SubmitProjectComponent.prototype, "horizontalStepper", void 0);

    __decorate([Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('addressAutocomplete'), __metadata("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"])], SubmitProjectComponent.prototype, "addressAutocomplete", void 0);

    __decorate([Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])(_angular_material_paginator__WEBPACK_IMPORTED_MODULE_4__["MatPaginator"], {
      "static": true
    }), __metadata("design:type", _angular_material_paginator__WEBPACK_IMPORTED_MODULE_4__["MatPaginator"])], SubmitProjectComponent.prototype, "paginator", void 0);

    __decorate([Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])(_angular_material_sort__WEBPACK_IMPORTED_MODULE_5__["MatSort"], {
      "static": true
    }), __metadata("design:type", _angular_material_sort__WEBPACK_IMPORTED_MODULE_5__["MatSort"])], SubmitProjectComponent.prototype, "sort", void 0);

    SubmitProjectComponent = __decorate([Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
      selector: 'app-submit-project',
      template: __importDefault(__webpack_require__(
      /*! raw-loader!./submit-project.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/submit-project/submit-project.component.html"))["default"],
      styles: [__importDefault(__webpack_require__(
      /*! ./submit-project.component.scss */
      "./src/app/pages/submit-project/submit-project.component.scss"))["default"]]
    }), __metadata("design:paramtypes", [src_app_app_service__WEBPACK_IMPORTED_MODULE_2__["AppService"], src_app_app_settings__WEBPACK_IMPORTED_MODULE_6__["AppSettings"], _ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__["TranslateService"], src_app_token_storage__WEBPACK_IMPORTED_MODULE_8__["TokenStorage"], _angular_router__WEBPACK_IMPORTED_MODULE_9__["ActivatedRoute"]])], SubmitProjectComponent);
    /***/
  },

  /***/
  "./src/app/pages/submit-project/submit-project.module.ts":
  /*!***************************************************************!*\
    !*** ./src/app/pages/submit-project/submit-project.module.ts ***!
    \***************************************************************/

  /*! exports provided: routes, SubmitProjectModule */

  /***/
  function srcAppPagesSubmitProjectSubmitProjectModuleTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "routes", function () {
      return routes;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "SubmitProjectModule", function () {
      return SubmitProjectModule;
    });
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
    /* harmony import */


    var _angular_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/common */
    "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
    /* harmony import */


    var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @angular/router */
    "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
    /* harmony import */


    var _shared_shared_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ../../shared/shared.module */
    "./src/app/shared/shared.module.ts");
    /* harmony import */


    var _agm_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! @agm/core */
    "./node_modules/@agm/core/__ivy_ngcc__/fesm2015/agm-core.js");
    /* harmony import */


    var ngx_input_file__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! ngx-input-file */
    "./node_modules/ngx-input-file/__ivy_ngcc__/fesm2015/ngx-input-file.js");
    /* harmony import */


    var _submit_project_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! ./submit-project.component */
    "./src/app/pages/submit-project/submit-project.component.ts");
    /* harmony import */


    var _angular_forms__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
    /*! @angular/forms */
    "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
    /* harmony import */


    var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
    /*! @ngx-translate/core */
    "./node_modules/@ngx-translate/core/__ivy_ngcc__/fesm2015/ngx-translate-core.js");
    /* harmony import */


    var ngx_quill__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(
    /*! ngx-quill */
    "./node_modules/ngx-quill/__ivy_ngcc__/fesm2015/ngx-quill.js");

    var __decorate = undefined && undefined.__decorate || function (decorators, target, key, desc) {
      var c = arguments.length,
          r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,
          d;
      if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {
        if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
      }
      return c > 3 && r && Object.defineProperty(target, key, r), r;
    };

    var __importDefault = undefined && undefined.__importDefault || function (mod) {
      return mod && mod.__esModule ? mod : {
        "default": mod
      };
    };

    var routes = [{
      path: '',
      component: _submit_project_component__WEBPACK_IMPORTED_MODULE_6__["SubmitProjectComponent"],
      pathMatch: 'full'
    }];

    var SubmitProjectModule = function SubmitProjectModule() {
      _classCallCheck(this, SubmitProjectModule);
    };

    SubmitProjectModule = __decorate([Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"])({
      declarations: [_submit_project_component__WEBPACK_IMPORTED_MODULE_6__["SubmitProjectComponent"]],
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"], _angular_router__WEBPACK_IMPORTED_MODULE_2__["RouterModule"].forChild(routes), _shared_shared_module__WEBPACK_IMPORTED_MODULE_3__["SharedModule"], ngx_input_file__WEBPACK_IMPORTED_MODULE_5__["InputFileModule"], _agm_core__WEBPACK_IMPORTED_MODULE_4__["AgmCoreModule"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["FormsModule"], _ngx_translate_core__WEBPACK_IMPORTED_MODULE_8__["TranslateModule"], ngx_quill__WEBPACK_IMPORTED_MODULE_9__["QuillModule"].forRoot({
        theme: 'snow',
        modules: {
          syntax: false,
          toolbar: [['bold', 'italic', 'underline', 'strike'], ['blockquote', 'code-block'], [{
            header: 1
          }, {
            header: 2
          }], [{
            list: 'ordered'
          }, {
            list: 'bullet'
          }], [{
            script: 'sub'
          }, {
            script: 'super'
          }], [{
            indent: '-1'
          }, {
            indent: '+1'
          }], [{
            direction: 'rtl'
          }], [{
            size: ['small', false, 'large', 'huge']
          }], [{
            header: [1, 2, 3, 4, 5, 6, false]
          }], [{
            color: []
          }, {
            background: []
          }], [{
            font: []
          }], [{
            align: []
          }], ['clean'], ['link', 'image', 'video'] // link and image, newsVideo
          ]
        }
      })]
    })], SubmitProjectModule);
    /***/
  }
}]);
//# sourceMappingURL=pages-submit-project-submit-project-module-es5.js.map