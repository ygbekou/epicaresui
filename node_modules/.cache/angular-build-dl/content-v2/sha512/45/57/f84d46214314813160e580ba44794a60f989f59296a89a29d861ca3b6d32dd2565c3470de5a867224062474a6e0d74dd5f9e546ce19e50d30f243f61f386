function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{F4UR:function(e,t,n){"use strict";n.r(t),n.d(t,"routes",(function(){return A})),n.d(t,"LoginModule",(function(){return y}));var r=n("ofXK"),a=n("tyNb"),o=n("PCNd"),i=n("3Pt+"),l=n("VAss"),c=n("xgk8"),s=n("F5nt"),m=n("FFMg"),p=n("fXoL"),u=n("sYmb"),d=n("XiUz"),f=n("Wp6s"),E=n("bTqV"),S=n("kmnG"),g=n("NFeN"),v=n("qFsG");function h(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"mat-error"),p["\u0275\u0275text"](1),p["\u0275\u0275pipe"](2,"translate"),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind1"](2,1,"VALIDATION.EMAIL_REQUIRED"),""))}function I(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"mat-error"),p["\u0275\u0275text"](1),p["\u0275\u0275pipe"](2,"translate"),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind1"](2,1,"VALIDATION.EMAIL_INVALID")," "))}function b(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"mat-error"),p["\u0275\u0275text"](1),p["\u0275\u0275pipe"](2,"translate"),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind1"](2,1,"VALIDATION.PASSWORD_REQUIRED"),""))}function x(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"mat-error"),p["\u0275\u0275text"](1),p["\u0275\u0275pipe"](2,"translate"),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind1"](2,1,"VALIDATION.MINIMUM_LENGTH")," 6"))}function R(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div",3),p["\u0275\u0275elementStart"](1,"a",21),p["\u0275\u0275text"](2),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e){var n=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate"](n.error)}}var M,O,N=function(e){return["/register",e]},A=[{path:"",component:(M=function(){function e(t,n,r,a,o,i){var l=this;_classCallCheck(this,e),this.fb=t,this.router=n,this.tokenStorage=r,this.translate=a,this.appService=o,this.route=i,this.hide=!0,this.action=0,this.route.params.subscribe((function(e){l.action=e.action,console.log("action ="+l.action)}))}return _createClass(e,[{key:"ngOnInit",value:function(){this.loginForm=this.fb.group({email:["",i.t.compose([i.t.required,l.a])],password:[null,i.t.compose([i.t.required,i.t.minLength(6)])],rememberMe:!1})}},{key:"onLoginFormSubmit",value:function(){this.loginForm.valid&&this.router.navigate(["/"])}},{key:"login",value:function(e){var t=this;if(this.loginForm.valid){var n=new m.M;n.userName=this.loginForm.controls.email.value,n.password=this.loginForm.controls.password.value;try{this.error="",n.lang=this.translate.currentLang,console.log("Current lang="+this.translate.currentLang),this.appService.authenticate(n).subscribe((function(e){console.log(e),""!==e.token&&null!==e.token?(console.log("login successful"),t.tokenStorage.saveAuthData(e),t.appService.updateToken(),console.log("action = "+t.action),t.router.navigate(1==t.action?["/submit-project/0"]:["/account/user/"+t.tokenStorage.getUserId()])):(console.log("login failed"),t.translate.get(["MESSAGE.INVALID_USER_PASS","COMMON.ERROR"]).subscribe((function(e){t.error=e["MESSAGE.INVALID_USER_PASS"]})))}))}catch(r){console.log("Exception during login..."),this.translate.get(["MESSAGE.ERROR_OCCURRED","COMMON.ERROR"]).subscribe((function(e){t.error=e["MESSAGE.ERROR_OCCURRED"]}))}}}},{key:"sendPassword",value:function(){var e=this;try{var t=new m.M;t.userName=this.loginForm.controls.userName.value,console.log("Sending password for user: "+t.userName),null===t.userName||""===t.userName?this.translate.get(["VALIDATION.USER_NAME_REQUIRED","COMMON.ERROR"]).subscribe((function(t){e.error=t["VALIDATION.USER_NAME_REQUIRED"]})):this.appService.resetPassword(t).subscribe((function(){e.translate.get(["MESSAGE.PASSWORD_SENT","COMMON.SUCCESS"]).subscribe((function(t){e.error=t["MESSAGE.PASSWORD_SENT"]}))}))}catch(n){this.translate.get(["MESSAGE.ERROR_OCCURRED","COMMON.ERROR"]).subscribe((function(t){e.error=t["MESSAGE.ERROR_OCCURRED"]}))}}}]),e}(),M.\u0275fac=function(e){return new(e||M)(p["\u0275\u0275directiveInject"](i.d),p["\u0275\u0275directiveInject"](a.d),p["\u0275\u0275directiveInject"](c.a),p["\u0275\u0275directiveInject"](u.d),p["\u0275\u0275directiveInject"](s.a),p["\u0275\u0275directiveInject"](a.a))},M.\u0275cmp=p["\u0275\u0275defineComponent"]({type:M,selectors:[["app-login"]],decls:45,vars:31,consts:[[1,"p-3"],[1,"theme-container"],["fxLayout","row","fxLayoutAlign","center center",1,"my-3"],["fxLayout","column","fxLayoutAlign","center center",1,"text-center"],[1,"uppercase"],["mat-button","","color","accent",1,"w-100",3,"routerLink"],[3,"formGroup","ngSubmit"],["appearance","outline",1,"w-100","mt-2"],["matPrefix","",1,"mr-1","text-muted"],["matInput","","placeholder","Email","formControlName","email","required",""],[4,"ngIf"],["appearance","outline",1,"w-100","mt-1"],["matInput","","placeholder","Password","formControlName","password","required","",3,"type"],["mat-icon-button","","matSuffix","","type","button",1,"text-muted",3,"click"],[1,"text-center","mt-2"],["mat-raised-button","","color","accent","type","submit",1,"uppercase"],["fxLayout","column","fxLayoutAlign","center center","class","text-center",4,"ngIf"],["fxLayoutAlign","end center"],["mat-button","",3,"click"],[1,"text-muted"],[1,"mx-1"],["mat-button","","color","accent",1,"w-100"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"div",0),p["\u0275\u0275elementStart"](1,"div",1),p["\u0275\u0275elementStart"](2,"div",2),p["\u0275\u0275elementStart"](3,"mat-card"),p["\u0275\u0275elementStart"](4,"div",3),p["\u0275\u0275elementStart"](5,"h1",4),p["\u0275\u0275text"](6),p["\u0275\u0275pipe"](7,"translate"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](8,"a",5),p["\u0275\u0275text"](9),p["\u0275\u0275pipe"](10,"translate"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](11,"form",6),p["\u0275\u0275listener"]("ngSubmit",(function(){return t.login(t.loginForm.value)})),p["\u0275\u0275elementStart"](12,"mat-form-field",7),p["\u0275\u0275elementStart"](13,"mat-icon",8),p["\u0275\u0275text"](14,"person"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](15,"mat-label"),p["\u0275\u0275text"](16),p["\u0275\u0275pipe"](17,"translate"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](18,"input",9),p["\u0275\u0275template"](19,h,3,3,"mat-error",10),p["\u0275\u0275template"](20,I,3,3,"mat-error",10),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](21,"mat-form-field",11),p["\u0275\u0275elementStart"](22,"mat-icon",8),p["\u0275\u0275text"](23,"lock"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](24,"mat-label"),p["\u0275\u0275text"](25),p["\u0275\u0275pipe"](26,"translate"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](27,"input",12),p["\u0275\u0275template"](28,b,3,3,"mat-error",10),p["\u0275\u0275template"](29,x,3,3,"mat-error",10),p["\u0275\u0275elementStart"](30,"button",13),p["\u0275\u0275listener"]("click",(function(){return t.hide=!t.hide})),p["\u0275\u0275elementStart"](31,"mat-icon"),p["\u0275\u0275text"](32),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](33,"div",14),p["\u0275\u0275elementStart"](34,"button",15),p["\u0275\u0275text"](35),p["\u0275\u0275pipe"](36,"translate"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](37,R,3,1,"div",16),p["\u0275\u0275elementStart"](38,"mat-card-actions",17),p["\u0275\u0275elementStart"](39,"button",18),p["\u0275\u0275listener"]("click",(function(){return t.sendPassword()})),p["\u0275\u0275elementStart"](40,"mat-icon",19),p["\u0275\u0275text"](41,"vpn_key"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](42,"span",20),p["\u0275\u0275text"](43),p["\u0275\u0275pipe"](44,"translate"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](3),p["\u0275\u0275styleProp"]("max-width",500,"px"),p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](7,17,"COMMON.SIGN_IN")),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("routerLink",p["\u0275\u0275pureFunction1"](29,N,t.action)),p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](10,19,"COMMON.NEW_REGISTER")),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("formGroup",t.loginForm),p["\u0275\u0275advance"](5),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](17,21,"COMMON.E_MAIL")),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("ngIf",null==t.loginForm.controls.email.errors?null:t.loginForm.controls.email.errors.required),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",t.loginForm.controls.email.hasError("invalidEmail")),p["\u0275\u0275advance"](5),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](26,23,"COMMON.PASSWORD")),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("type",t.hide?"password":"text"),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",null==t.loginForm.controls.password.errors?null:t.loginForm.controls.password.errors.required),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",t.loginForm.controls.password.hasError("minlength")),p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate"](t.hide?"visibility_off":"visibility"),p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind1"](36,25,"COMMON.SIGN_IN")," "),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngIf",t.error),p["\u0275\u0275advance"](6),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](44,27,"MESSAGE.SEND_PASSWORD")))},directives:[d.c,d.b,f.a,E.a,a.g,i.u,i.n,i.g,S.c,g.a,S.g,S.f,v.b,i.b,i.m,i.f,i.s,r.NgIf,E.b,S.h,f.b,S.b],pipes:[u.c],styles:[".auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}"]}),M),pathMatch:"full"}],y=((O=function e(){_classCallCheck(this,e)}).\u0275mod=p["\u0275\u0275defineNgModule"]({type:O}),O.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(e){return new(e||O)},imports:[[r.CommonModule,a.h.forChild(A),o.a,u.b]]}),O)}}]);