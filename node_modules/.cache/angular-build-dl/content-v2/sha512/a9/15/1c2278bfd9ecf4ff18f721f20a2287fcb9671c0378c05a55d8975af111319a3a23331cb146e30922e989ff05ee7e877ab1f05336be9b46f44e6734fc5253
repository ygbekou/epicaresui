{"version":3,"sources":["webpack:///src/app/pages/polls/poll-details/poll-details.component.html","webpack:///src/app/pages/polls/poll-details/poll-details.component.scss","webpack:///src/app/pages/polls/poll-details/poll-details.component.ts","webpack:///src/app/pages/polls/poll-details/poll-details.module.ts"],"names":["PollDetailsComponent","appSettings","appService","translate","mediaObserver","activatedRoute","sidenavOpen","psConfig","wheelPropagation","viewType","viewCol","count","lang","pagination","settings","watcher","media$","subscribe","change","mqAlias","params","Number","id","getPollQuestionDescs","unsubscribe","pollId","console","log","parameters","push","getAllByCriteriaWithFiles","data","pollQuestionDescs","length","message","paginator","pageIndex","total","totalPages","filterData","searchFields","sort","page","perPage","field","removedSearchField","resetPagination","obj","e","window","scrollTo","selector","template","routes","path","component","pathMatch","PollDetailsModule","declarations","exports","imports","forChild"],"mappings":"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","file":"pages-polls-poll-details-poll-details-module-es5.js","sourcesContent":["export default \"<app-header-image-small [backgroundImage]=\\\"'assets/images/others/polls.jpg'\\\" [bgImageAnimate]=\\\"false\\\"\\r\\n    [contentOffsetToTop]=\\\"false\\\" desc=\\\"{{ 'COMMON.POLL_AND_ELECTION' | translate }}\\\"\\r\\n    [contentMinHeight]=\\\"200\\\">\\r\\n</app-header-image-small>\\r\\n\\r\\n<div class=\\\"px-3\\\">\\r\\n\\r\\n    <div class=\\\"theme-container\\\">\\r\\n        <mat-sidenav-container class=\\\"all-properties mt-3\\\">\\r\\n            <mat-sidenav-content ngClass.gt-sm=\\\"distance\\\">\\r\\n\\r\\n                <div fxLayout=\\\"row wrap\\\" class=\\\"properties-wrapper mt-0\\\">\\r\\n\\r\\n                    <div fxFlex=\\\"100\\\" fxLayoutAlign=\\\"start start\\\" class=\\\"p-2\\\">\\r\\n                        <mat-chip-list [ngClass]=\\\"(settings.rtl) ? 'ml-2' : 'mr-2'\\\">\\r\\n                            <mat-chip selected disableRipple=\\\"true\\\" color=\\\"warn\\\" class=\\\"uppercase ws-nowrap\\\">\\r\\n                                {{ pagination?.total }} {{'COMMON.QUESTIONS'|translate}}s\\r\\n                            </mat-chip>\\r\\n                        </mat-chip-list>\\r\\n                        <app-blogs-search-results-filters [searchFields]=\\\"searchFields\\\"\\r\\n                            (onRemoveSearchField)=\\\"removeSearchField($event)\\\">\\r\\n                        </app-blogs-search-results-filters>\\r\\n                    </div>\\r\\n\\r\\n                    <div *ngFor=\\\"let pollQuestionDesc of pollQuestionDescs\\\"\\r\\n                        [fxFlex]=\\\"(viewType=='grid') ? viewCol : 100\\\" class=\\\"item\\\">\\r\\n                        <mat-card class=\\\"property-item p-0\\\" fxLayout=\\\"row wrap\\\" style=\\\"display: block;\\\">\\r\\n\\r\\n                            <div fxFlex=\\\"100\\\" [fxFlex.gt-sm]=\\\"(viewType=='list') ? 60 : 100\\\"\\r\\n                                [fxFlex.sm]=\\\"(viewType=='list') ? 50 : 100\\\" class=\\\"p-3\\\">\\r\\n\\r\\n                                <div fxLayout=\\\"column\\\" fxLayoutAlign=\\\"start stretch\\\" class=\\\"h-100\\\">\\r\\n                                    <mat-card-content class=\\\"mb-0\\\">\\r\\n                                        <a color=\\\"accent\\\" style=\\\"width: 100%; text-decoration: none;\\\"\\r\\n                                            [routerLink]=\\\"['/poll-question-details/scrutin', pollQuestionDesc.pollQuestion.id]\\\">\\r\\n                                            <h4 class=\\\"title\\\">\\r\\n                                                <span>N<sup>o</sup>:<span\\r\\n                                                        class=\\\"fw-500 mx-2\\\">{{pollQuestionDesc.pollQuestion?.id |number:'3.0'}}</span></span>\\r\\n                                                </h4>\\r\\n                                        </a>\\r\\n                                        <hr />\\r\\n\\r\\n                                        <div fxShow=\\\"false\\\" fxShow.gt-sm class=\\\"mt-3\\\">\\r\\n                                            <div [innerHTML]=\\\"pollQuestionDesc.description | safehtml\\\"></div>\\r\\n                                        </div>\\r\\n\\r\\n                                    </mat-card-content>\\r\\n                                    <div class=\\\"sticky-footer-helper\\\" fxFlex=\\\"grow\\\"></div>\\r\\n                                    <mat-card-actions class=\\\"m-0 p-0\\\" fxLayoutAlign=\\\"space-between center\\\">\\r\\n                                        <p fxLayout=\\\"row\\\" class=\\\"date mb-0\\\">\\r\\n                                            <mat-icon class=\\\"text-muted\\\">date_range</mat-icon>\\r\\n                                            <span\\r\\n                                                class=\\\"mx-2\\\">{{pollQuestionDesc.createDate | date:\\\"dd MMMM, yyyy\\\" }}</span>\\r\\n                                        </p>\\r\\n                                        <div>\\r\\n                                            <a [routerLink]=\\\"['/poll-question-details/scrutin', pollQuestionDesc?.pollQuestion?.id]\\\"\\r\\n                                                mat-stroked-button color=\\\"primary\\\" class=\\\"uppercase\\\" *ngIf=\\\"pollQuestionDesc.pollQuestion.poll.status ===  1\\\">\\r\\n                                                {{'COMMON.READ_MORE'|translate }}</a>\\r\\n                                            <a [routerLink]=\\\"['/poll-question-details/results', pollQuestionDesc?.pollQuestion?.id]\\\" mat-stroked-button\\r\\n                                                color=\\\"primary\\\" class=\\\"uppercase\\\" *ngIf=\\\"pollQuestionDesc.pollQuestion.poll.status >  1\\\">\\r\\n                                                {{'COMMON.RESULTS'|translate }}</a>\\r\\n                                        </div>\\r\\n                                    </mat-card-actions>\\r\\n                                </div>\\r\\n\\r\\n                            </div>\\r\\n\\r\\n                        </mat-card>\\r\\n                    </div>\\r\\n                    <div *ngIf=\\\"pollQuestionDescs?.length == 0\\\" fxFlex=\\\"100\\\" fxLayoutAlign=\\\"center center\\\"\\r\\n                        [style.min-height.px]=\\\"200\\\">\\r\\n                        <mat-spinner *ngIf=\\\"!message\\\"></mat-spinner>\\r\\n                        <mat-chip-list *ngIf=\\\"message\\\">\\r\\n                            <mat-chip selected disableRipple=\\\"true\\\" color=\\\"warn\\\" class=\\\"uppercase ws-nowrap\\\">\\r\\n                                {{message}}\\r\\n                            </mat-chip>\\r\\n                        </mat-chip-list>\\r\\n                    </div>\\r\\n\\r\\n                </div>\\r\\n            </mat-sidenav-content>\\r\\n        </mat-sidenav-container>\\r\\n    </div>\\r\\n</div>\\r\\n<app-get-in-touch></app-get-in-touch>\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3BvbGxzL3BvbGwtZGV0YWlscy9wb2xsLWRldGFpbHMuY29tcG9uZW50LnNjc3MifQ== */\";","import { Component, OnInit, ViewChild, OnDestroy } from '@angular/core';\r\nimport { MatPaginator } from '@angular/material/paginator';\r\nimport { MediaChange, MediaObserver } from '@angular/flex-layout';\r\nimport { PerfectScrollbarConfigInterface } from 'ngx-perfect-scrollbar';\r\nimport { Subscription } from 'rxjs';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { PollQuestionDesc, PollDesc, Pagination } from 'src/app/app.models';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Settings, AppSettings } from 'src/app/app.settings';\r\nimport { AppService } from 'src/app/app.service';\r\n\r\n@Component({\r\n  selector: 'app-poll-details',\r\n  templateUrl: './poll-details.component.html',\r\n  styleUrls: ['./poll-details.component.scss']\r\n})\r\nexport class PollDetailsComponent implements OnInit, OnDestroy {\r\n  @ViewChild('sidenav') sidenav: any;\r\n  public sidenavOpen = true;\r\n  @ViewChild(MatPaginator) paginator: MatPaginator;\r\n  public psConfig: PerfectScrollbarConfigInterface = {\r\n    wheelPropagation: true\r\n  };\r\n  public pollDesc: PollDesc;\r\n  public pollQuestionDescs: PollQuestionDesc[];\r\n  public viewType = 'grid';\r\n  public viewCol = 33.3;\r\n  public count = 12;\r\n  public sort: string;\r\n  public searchFields: any;\r\n  public removedSearchField: string;\r\n  public pagination: any;\r\n  public message: string;\r\n  public watcher: Subscription;\r\n  lang = 'fr';\r\n\r\n  public settings: Settings\r\n\r\n  constructor(public appSettings: AppSettings,\r\n    public appService: AppService,\r\n    protected translate: TranslateService,\r\n    public mediaObserver: MediaObserver,\r\n    private activatedRoute: ActivatedRoute) {\r\n\r\n    this.pagination = new Pagination(1, this.count, null, 2, 0, 0);\r\n    this.settings = appService.appSettings.settings;\r\n    this.watcher = mediaObserver.media$.subscribe((change: MediaChange) => {\r\n      if (change.mqAlias === 'xs') {\r\n        this.sidenavOpen = false;\r\n        this.viewCol = 100;\r\n      }\r\n      else if (change.mqAlias === 'sm') {\r\n        this.sidenavOpen = false;\r\n        this.viewCol = 50;\r\n      }\r\n      else if (change.mqAlias === 'md') {\r\n        this.viewCol = 50;\r\n        this.sidenavOpen = true;\r\n      }\r\n      else {\r\n        this.viewCol = 33.3;\r\n        this.sidenavOpen = true;\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.activatedRoute.params.subscribe(params => {\r\n      if (Number(params.id) > 0) {\r\n        this.getPollQuestionDescs(params.id);\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.watcher.unsubscribe();\r\n  }\r\n\r\n  getPollQuestionDescs(pollId: number) {\r\n    console.log('Getting Poll Poll Questions ...')\r\n    const parameters: string[] = [];\r\n    parameters.push('e.language = |language|' + this.lang + '|String');\r\n    //parameters.push('e.pollQuestion.status = |stb|1|Integer');\r\n    parameters.push('e.pollQuestion.poll.id = |pollId|' + pollId + '|Long');\r\n    this.appService.getAllByCriteriaWithFiles('com.wack.poll.PollQuestionDesc', parameters,\r\n      ' order by e.pollQuestion.rank asc').subscribe((data: PollQuestionDesc[]) => {\r\n        this.pollQuestionDescs = data;\r\n        console.log(this.pollQuestionDescs);\r\n        this.count = this.pollQuestionDescs.length;\r\n        this.pagination = new Pagination(1, this.count, null, 2, this.count, 0);\r\n        this.message = null;\r\n      });\r\n  }\r\n\r\n\r\n  public resetPagination() {\r\n    if (this.paginator) {\r\n      this.paginator.pageIndex = 0;\r\n    }\r\n    this.pagination = new Pagination(1, this.count, null, null, this.pagination.total, this.pagination.totalPages);\r\n  }\r\n\r\n  public filterData(data) {\r\n    console.log(data);\r\n    return this.appService.filterData(data, this.searchFields, this.sort, this.pagination.page, this.pagination.perPage);\r\n  }\r\n\r\n\r\n\r\n  public removeSearchField(field) {\r\n    this.message = null;\r\n    this.removedSearchField = field;\r\n  }\r\n\r\n  public changeCount(count) {\r\n    this.count = count;\r\n    this.pollQuestionDescs.length = 0;\r\n    this.resetPagination();\r\n  }\r\n  public changeSorting(sort) {\r\n    this.sort = sort;\r\n  }\r\n  public changeViewType(obj) {\r\n    this.viewType = obj.viewType;\r\n    this.viewCol = obj.viewCol;\r\n  }\r\n\r\n  public onPageChange(e) {\r\n    this.pagination.page = e.pageIndex + 1;\r\n    window.scrollTo(0, 0);\r\n  }\r\n\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\nimport { AgmCoreModule } from '@agm/core';\r\nimport { MatVideoModule } from 'mat-video';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { PollDetailsComponent } from './poll-details.component';\r\n\r\nexport const routes = [\r\n  { path: '', component: PollDetailsComponent, pathMatch: 'full' }\r\n];\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PollDetailsComponent\r\n  ],\r\n  exports: [\r\n    PollDetailsComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    TranslateModule,\r\n    RouterModule.forChild(routes),\r\n    AgmCoreModule,\r\n    MatVideoModule,\r\n    SharedModule\r\n  ]\r\n})\r\nexport class PollDetailsModule { }\r\n"]}