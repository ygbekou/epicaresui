function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["pages-register-register-module"], {
  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/register/register.component.html":
  /*!**********************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/register/register.component.html ***!
    \**********************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesRegisterRegisterComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<div class=\"p-3\">\r\n    <div class=\"theme-container\">\r\n\r\n        <div fxLayout=\"row\" fxLayoutAlign=\"center center\" class=\"my-3\">\r\n            <mat-card [style.max-width.px]=\"500\">\r\n                <div fxLayout=\"column\" fxLayoutAlign=\"center center\" class=\"text-center\">\r\n                    <h1 class=\"uppercase\">{{'COMMON.REGISTRATION' | translate }}</h1>\r\n                    <a mat-button [routerLink]=\"['/login', action]\" color=\"accent\"\r\n                        class=\"w-100\">{{'COMMON.NOTNEW_SIGN_IN' | translate }}</a>\r\n                </div>\r\n                <form [formGroup]=\"registerForm\" (ngSubmit)=\"onRegisterFormSubmit(registerForm.value)\">\r\n                    <mat-form-field appearance=\"outline\" class=\"w-100 mt-2\">\r\n                        <mat-icon matPrefix class=\"mr-1 text-muted\">person</mat-icon>\r\n                        <mat-label>{{'COMMON.FIRST_NAME' | translate }}</mat-label>\r\n                        <input matInput placeholder=\"{{'COMMON.FIRST_NAME' | translate }}\" formControlName=\"firstName\"\r\n                            required>\r\n                        <mat-error *ngIf=\"registerForm.controls.firstName.errors?.required\">\r\n                            {{'VALIDATION.FIELD_REQUIRED' | translate }}\r\n                        </mat-error>\r\n                    </mat-form-field>\r\n                    <mat-form-field appearance=\"outline\" class=\"w-100 mt-2\">\r\n                        <mat-icon matPrefix class=\"mr-1 text-muted\">person</mat-icon>\r\n                        <mat-label>{{'COMMON.LAST_NAME' | translate }}</mat-label>\r\n                        <input matInput placeholder=\"{{'COMMON.LAST_NAME' | translate }}\" formControlName=\"lastName\"\r\n                            required>\r\n                        <mat-error *ngIf=\"registerForm.controls.lastName.errors?.required\">\r\n                            {{'VALIDATION.FIELD_REQUIRED' | translate }}\r\n                        </mat-error>\r\n                    </mat-form-field>\r\n                    <mat-form-field appearance=\"outline\" class=\"w-100\">\r\n                        <mat-label> {{'COMMON.PHONE' | translate}}\r\n                        </mat-label>\r\n                        <input matInput placeholder=\"Tel.\" formControlName=\"phone\" required>\r\n                        <mat-error *ngIf=\"registerForm.controls.phone.errors?.required\">\r\n                            {{'VALIDATION.PHONE_REQUIRED' | translate }}\r\n                        </mat-error>\r\n                    </mat-form-field>\r\n                    <mat-form-field appearance=\"outline\" class=\"w-100 mt-1\">\r\n                        <mat-icon matPrefix class=\"mr-1 text-muted\">email</mat-icon>\r\n                        <mat-label>{{'COMMON.E_MAIL' | translate }}</mat-label>\r\n                        <input matInput placeholder=\"Email\" formControlName=\"email\" required>\r\n                        <mat-error *ngIf=\"registerForm.controls.email.errors?.required\">\r\n                            {{'VALIDATION.EMAIL_REQUIRED' | translate }}</mat-error>\r\n                        <mat-error *ngIf=\"registerForm.controls.email.hasError('invalidEmail')\">\r\n                            {{'VALIDATION.EMAIL_INVALID' | translate }}\r\n                        </mat-error>\r\n                    </mat-form-field>\r\n                    <mat-form-field appearance=\"outline\" class=\"w-100 mt-1\">\r\n                        <mat-icon matPrefix class=\"mr-1 text-muted\">lock</mat-icon>\r\n                        <mat-label>{{'COMMON.PASSWORD' | translate }}</mat-label>\r\n                        <input matInput placeholder=\"Password\" formControlName=\"password\" type=\"password\" minlength=\"6\"\r\n                            required [type]=\"hide ? 'password' : 'text'\">\r\n                        <mat-error *ngIf=\"registerForm.controls.password.errors?.required\">\r\n                            {{'VALIDATION.PASSWORD_REQUIRED' | translate }}\r\n                        </mat-error>\r\n                        <mat-error *ngIf=\"registerForm.controls.password.hasError('minlength')\">\r\n                            {{'VALIDATION.MINIMUM_LENGTH' | translate }} 6</mat-error>\r\n                        <button mat-icon-button matSuffix (click)=\"hide = !hide\" type=\"button\" class=\"text-muted\">\r\n                            <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>\r\n                        </button>\r\n                    </mat-form-field>\r\n                    <mat-form-field appearance=\"outline\" class=\"w-100 mt-1\">\r\n                        <mat-icon matPrefix class=\"mr-1 text-muted\">lock</mat-icon>\r\n                        <mat-label>{{'COMMON.CONFIRM_PASSWORD' | translate }}</mat-label>\r\n                        <input matInput placeholder=\"Confirm Password\" formControlName=\"confirmPassword\" type=\"password\"\r\n                            required [type]=\"hide ? 'password' : 'text'\">\r\n                        <mat-error *ngIf=\"registerForm.controls.confirmPassword.errors?.required\">\r\n                            {{'VALIDATION.FIELD_REQUIRED' | translate }}</mat-error>\r\n                        <mat-error *ngIf=\"registerForm.controls.confirmPassword.hasError('mismatchedPasswords')\">\r\n                            {{'VALIDATION.PASSWORD_NOT_MATCH' | translate }}</mat-error>\r\n                        <button mat-icon-button matSuffix (click)=\"hide = !hide\" type=\"button\" class=\"text-muted\">\r\n                            <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>\r\n                        </button>\r\n                    </mat-form-field>\r\n                    <mat-radio-group formControlName=\"sex\" class=\"my-3\">\r\n                        <mat-radio-button value=\"F\">\r\n                            {{'COMMON.MALE' | translate }}\r\n                        </mat-radio-button>&nbsp;&nbsp;\r\n                        <mat-radio-button value=\"M\">\r\n                            {{'COMMON.FEMALE' | translate }}\r\n                        </mat-radio-button>\r\n                    </mat-radio-group>\r\n                    <br />\r\n                    <mat-slide-toggle formControlName=\"receiveNewsletter\" class=\"my-2\">\r\n                        {{'COMMON.RECEIVE_NEWSLETTER' | translate }}\r\n                    </mat-slide-toggle>\r\n                    <div class=\"text-center mt-2\">\r\n                        <button mat-raised-button color=\"accent\" class=\"uppercase\" type=\"submit\">\r\n                            {{'COMMON.REGISTER' | translate }}\r\n                        </button>\r\n                    </div>\r\n                    <div fxLayout=\"column\" fxLayoutAlign=\"center center\" class=\"text-center\" *ngIf=\"error\">\r\n                        <a mat-button color=\"accent\" class=\"w-100\">{{error}}</a>\r\n                    </div>\r\n                </form>\r\n                <div class=\"divider mt-4\"></div>\r\n                <mat-card-actions fxLayoutAlign=\"center center\" class=\"text-center\">\r\n                    <small class=\"my-3\">{{'MESSAGE.AGREEMENT' | translate }} <a mat-button\r\n                            routerLink=\"/terms-conditions\" color=\"primary\"\r\n                            class=\"mx-2\">{{'COMMON.TERMS_CONDITIONS' | translate }}</a>\r\n                    </small>\r\n                </mat-card-actions>\r\n            </mat-card>\r\n        </div>\r\n\r\n    </div>\r\n</div>";
    /***/
  },

  /***/
  "./src/app/pages/register/register.component.scss":
  /*!********************************************************!*\
    !*** ./src/app/pages/register/register.component.scss ***!
    \********************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesRegisterRegisterComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3JlZ2lzdGVyL3JlZ2lzdGVyLmNvbXBvbmVudC5zY3NzIn0= */";
    /***/
  },

  /***/
  "./src/app/pages/register/register.component.ts":
  /*!******************************************************!*\
    !*** ./src/app/pages/register/register.component.ts ***!
    \******************************************************/

  /*! exports provided: RegisterComponent */

  /***/
  function srcAppPagesRegisterRegisterComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "RegisterComponent", function () {
      return RegisterComponent;
    });
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
    /* harmony import */


    var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/forms */
    "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
    /* harmony import */


    var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @angular/router */
    "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
    /* harmony import */


    var _angular_material_snack_bar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! @angular/material/snack-bar */
    "./node_modules/@angular/material/__ivy_ngcc__/fesm2015/snack-bar.js");
    /* harmony import */


    var src_app_theme_utils_app_validators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! src/app/theme/utils/app-validators */
    "./src/app/theme/utils/app-validators.ts");
    /* harmony import */


    var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! @ngx-translate/core */
    "./node_modules/@ngx-translate/core/__ivy_ngcc__/fesm2015/ngx-translate-core.js");
    /* harmony import */


    var src_app_app_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! src/app/app.service */
    "./src/app/app.service.ts");
    /* harmony import */


    var src_app_token_storage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
    /*! src/app/token.storage */
    "./src/app/token.storage.ts");

    var __decorate = undefined && undefined.__decorate || function (decorators, target, key, desc) {
      var c = arguments.length,
          r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,
          d;
      if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {
        if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
      }
      return c > 3 && r && Object.defineProperty(target, key, r), r;
    };

    var __metadata = undefined && undefined.__metadata || function (k, v) {
      if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
    };

    var __importDefault = undefined && undefined.__importDefault || function (mod) {
      return mod && mod.__esModule ? mod : {
        "default": mod
      };
    };

    var RegisterComponent = /*#__PURE__*/function () {
      function RegisterComponent(fb, router, tokenStorage, snackBar, translate, appService, route) {
        var _this = this;

        _classCallCheck(this, RegisterComponent);

        this.fb = fb;
        this.router = router;
        this.tokenStorage = tokenStorage;
        this.snackBar = snackBar;
        this.translate = translate;
        this.appService = appService;
        this.route = route;
        this.hide = true;
        this.error = '';
        this.action = 0;
        this.userGroups = [];
        this.route.params.subscribe(function (params) {
          _this.action = params.action;
          console.log('action =' + _this.action);
        });

        if (this.translate.currentLang === 'fr') {
          this.userGroups = [{
            id: 4,
            name: 'Client',
            type: 'UserGroup'
          }, {
            id: 5,
            name: 'Editeur',
            type: 'UserGroup'
          }, {
            id: 100,
            name: 'Autre',
            type: 'UserGroup'
          }];
        } else {
          this.userGroups = [{
            id: 4,
            name: 'Client',
            type: 'UserGroup'
          }, {
            id: 5,
            name: 'Editor',
            type: 'UserGroup'
          }, {
            id: 100,
            name: 'Other',
            type: 'UserGroup'
          }];
        }
      }

      _createClass(RegisterComponent, [{
        key: "ngOnInit",
        value: function ngOnInit() {
          this.registerForm = this.fb.group({
            firstName: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required],
            lastName: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required],
            sex: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required],
            phone: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required],
            // userName: ['', Validators.compose([Validators.required, Validators.minLength(6)])],
            email: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required, src_app_theme_utils_app_validators__WEBPACK_IMPORTED_MODULE_4__["emailValidator"]])],
            password: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required],
            confirmPassword: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required],
            receiveNewsletter: true
          }, {
            validator: Object(src_app_theme_utils_app_validators__WEBPACK_IMPORTED_MODULE_4__["matchingPasswords"])('password', 'confirmPassword')
          });
        }
      }, {
        key: "onRegisterFormSubmit",
        value: function onRegisterFormSubmit(values) {
          var _this2 = this;

          if (this.registerForm.valid) {
            console.log(values);
            var user = values;
            user.type = 'User';
            console.log(user);
            this.appService.saveUserAndLogin(user).subscribe(function (data) {
              if (data.token === 'E') {
                _this2.translate.get(['VALIDATION.EMAIL_USED', 'COMMON.ERROR']).subscribe(function (res) {
                  _this2.error = res['VALIDATION.EMAIL_USED'];
                });
              } else if (data.token === 'S') {
                _this2.translate.get(['MESSAGE.ERROR_OCCURRED', 'COMMON.ERROR']).subscribe(function (res) {
                  _this2.error = res['MESSAGE.ERROR_OCCURRED'];
                });
              } else {
                _this2.tokenStorage.saveAuthData(data);

                _this2.appService.updateToken();

                console.log('Token = ' + _this2.tokenStorage.getToken());
                console.log('action = ' + _this2.action);

                if (_this2.action == 1) {
                  _this2.router.navigate(['/submit-project/0']);
                } else {
                  _this2.router.navigate(['/account/user/' + _this2.tokenStorage.getUserId()]);
                }
              }
            });
          }
        }
      }]);

      return RegisterComponent;
    }();

    RegisterComponent.ctorParameters = function () {
      return [{
        type: _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"]
      }, {
        type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"]
      }, {
        type: src_app_token_storage__WEBPACK_IMPORTED_MODULE_7__["TokenStorage"]
      }, {
        type: _angular_material_snack_bar__WEBPACK_IMPORTED_MODULE_3__["MatSnackBar"]
      }, {
        type: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__["TranslateService"]
      }, {
        type: src_app_app_service__WEBPACK_IMPORTED_MODULE_6__["AppService"]
      }, {
        type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"]
      }];
    };

    RegisterComponent = __decorate([Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
      selector: 'app-register',
      template: __importDefault(__webpack_require__(
      /*! raw-loader!./register.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/register/register.component.html"))["default"],
      styles: [__importDefault(__webpack_require__(
      /*! ./register.component.scss */
      "./src/app/pages/register/register.component.scss"))["default"]]
    }), __metadata("design:paramtypes", [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"], _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"], src_app_token_storage__WEBPACK_IMPORTED_MODULE_7__["TokenStorage"], _angular_material_snack_bar__WEBPACK_IMPORTED_MODULE_3__["MatSnackBar"], _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__["TranslateService"], src_app_app_service__WEBPACK_IMPORTED_MODULE_6__["AppService"], _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"]])], RegisterComponent);
    /***/
  },

  /***/
  "./src/app/pages/register/register.module.ts":
  /*!***************************************************!*\
    !*** ./src/app/pages/register/register.module.ts ***!
    \***************************************************/

  /*! exports provided: routes, RegisterModule */

  /***/
  function srcAppPagesRegisterRegisterModuleTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "routes", function () {
      return routes;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "RegisterModule", function () {
      return RegisterModule;
    });
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
    /* harmony import */


    var _angular_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/common */
    "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
    /* harmony import */


    var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @angular/router */
    "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
    /* harmony import */


    var _shared_shared_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ../../shared/shared.module */
    "./src/app/shared/shared.module.ts");
    /* harmony import */


    var _register_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! ./register.component */
    "./src/app/pages/register/register.component.ts");
    /* harmony import */


    var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! @ngx-translate/core */
    "./node_modules/@ngx-translate/core/__ivy_ngcc__/fesm2015/ngx-translate-core.js");

    var __decorate = undefined && undefined.__decorate || function (decorators, target, key, desc) {
      var c = arguments.length,
          r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,
          d;
      if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {
        if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
      }
      return c > 3 && r && Object.defineProperty(target, key, r), r;
    };

    var __importDefault = undefined && undefined.__importDefault || function (mod) {
      return mod && mod.__esModule ? mod : {
        "default": mod
      };
    };

    var routes = [{
      path: '',
      component: _register_component__WEBPACK_IMPORTED_MODULE_4__["RegisterComponent"],
      pathMatch: 'full'
    }];

    var RegisterModule = function RegisterModule() {
      _classCallCheck(this, RegisterModule);
    };

    RegisterModule = __decorate([Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"])({
      declarations: [_register_component__WEBPACK_IMPORTED_MODULE_4__["RegisterComponent"]],
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"], _angular_router__WEBPACK_IMPORTED_MODULE_2__["RouterModule"].forChild(routes), _shared_shared_module__WEBPACK_IMPORTED_MODULE_3__["SharedModule"], _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__["TranslateModule"]]
    })], RegisterModule);
    /***/
  }
}]);
//# sourceMappingURL=pages-register-register-module-es5.js.map