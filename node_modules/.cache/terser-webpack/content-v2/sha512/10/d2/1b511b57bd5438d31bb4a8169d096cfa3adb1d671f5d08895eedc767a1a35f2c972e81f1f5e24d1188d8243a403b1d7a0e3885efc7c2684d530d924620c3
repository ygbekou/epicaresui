{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{F4UR:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"routes\",(function(){return M})),n.d(t,\"LoginModule\",(function(){return A}));var r=n(\"Valr\"),a=n(\"DUip\"),o=n(\"PCNd\"),i=n(\"QJY3\"),l=n(\"VAss\"),s=n(\"xgk8\"),c=n(\"F5nt\"),m=n(\"FFMg\"),p=n(\"TYT/\"),d=n(\"o8Qb\"),u=n(\"uLXW\"),E=n(\"17Os\"),S=n(\"p+mS\"),g=n(\"eHTH\"),h=n(\"GsDI\"),I=n(\"cSbt\");function f(e,t){1&e&&(p[\"\\u0275\\u0275elementStart\"](0,\"mat-error\"),p[\"\\u0275\\u0275text\"](1),p[\"\\u0275\\u0275pipe\"](2,\"translate\"),p[\"\\u0275\\u0275elementEnd\"]()),2&e&&(p[\"\\u0275\\u0275advance\"](1),p[\"\\u0275\\u0275textInterpolate1\"](\" \",p[\"\\u0275\\u0275pipeBind1\"](2,1,\"VALIDATION.EMAIL_REQUIRED\"),\"\"))}function v(e,t){1&e&&(p[\"\\u0275\\u0275elementStart\"](0,\"mat-error\"),p[\"\\u0275\\u0275text\"](1),p[\"\\u0275\\u0275pipe\"](2,\"translate\"),p[\"\\u0275\\u0275elementEnd\"]()),2&e&&(p[\"\\u0275\\u0275advance\"](1),p[\"\\u0275\\u0275textInterpolate1\"](\" \",p[\"\\u0275\\u0275pipeBind1\"](2,1,\"VALIDATION.EMAIL_INVALID\"),\" \"))}function x(e,t){1&e&&(p[\"\\u0275\\u0275elementStart\"](0,\"mat-error\"),p[\"\\u0275\\u0275text\"](1),p[\"\\u0275\\u0275pipe\"](2,\"translate\"),p[\"\\u0275\\u0275elementEnd\"]()),2&e&&(p[\"\\u0275\\u0275advance\"](1),p[\"\\u0275\\u0275textInterpolate1\"](\" \",p[\"\\u0275\\u0275pipeBind1\"](2,1,\"VALIDATION.PASSWORD_REQUIRED\"),\"\"))}function R(e,t){1&e&&(p[\"\\u0275\\u0275elementStart\"](0,\"mat-error\"),p[\"\\u0275\\u0275text\"](1),p[\"\\u0275\\u0275pipe\"](2,\"translate\"),p[\"\\u0275\\u0275elementEnd\"]()),2&e&&(p[\"\\u0275\\u0275advance\"](1),p[\"\\u0275\\u0275textInterpolate1\"](\" \",p[\"\\u0275\\u0275pipeBind1\"](2,1,\"VALIDATION.MINIMUM_LENGTH\"),\" 6\"))}function b(e,t){if(1&e&&(p[\"\\u0275\\u0275elementStart\"](0,\"div\",3),p[\"\\u0275\\u0275elementStart\"](1,\"a\",21),p[\"\\u0275\\u0275text\"](2),p[\"\\u0275\\u0275elementEnd\"](),p[\"\\u0275\\u0275elementEnd\"]()),2&e){const e=p[\"\\u0275\\u0275nextContext\"]();p[\"\\u0275\\u0275advance\"](2),p[\"\\u0275\\u0275textInterpolate\"](e.error)}}const O=function(e){return[\"/register\",e]},M=[{path:\"\",component:(()=>{class e{constructor(e,t,n,r,a,o){this.fb=e,this.router=t,this.tokenStorage=n,this.translate=r,this.appService=a,this.route=o,this.hide=!0,this.action=0,this.route.params.subscribe(e=>{this.action=e.action,console.log(\"action =\"+this.action)})}ngOnInit(){this.loginForm=this.fb.group({email:[\"\",i.t.compose([i.t.required,l.a])],password:[null,i.t.compose([i.t.required,i.t.minLength(6)])],rememberMe:!1})}onLoginFormSubmit(){this.loginForm.valid&&this.router.navigate([\"/\"])}login(e){if(this.loginForm.valid){const e=new m.L;e.userName=this.loginForm.controls.email.value,e.password=this.loginForm.controls.password.value;try{this.error=\"\",e.lang=this.translate.currentLang,console.log(\"Current lang=\"+this.translate.currentLang),this.appService.authenticate(e).subscribe(e=>{console.log(e),\"\"!==e.token&&null!==e.token?(console.log(\"login successful\"),this.tokenStorage.saveAuthData(e),this.appService.updateToken(),console.log(\"action = \"+this.action),this.router.navigate(1==this.action?[\"/submit-project/0\"]:[\"/account/user/\"+this.tokenStorage.getUserId()])):(console.log(\"login failed\"),this.translate.get([\"MESSAGE.INVALID_USER_PASS\",\"COMMON.ERROR\"]).subscribe(e=>{this.error=e[\"MESSAGE.INVALID_USER_PASS\"]}))})}catch(t){console.log(\"Exception during login...\"),this.translate.get([\"MESSAGE.ERROR_OCCURRED\",\"COMMON.ERROR\"]).subscribe(e=>{this.error=e[\"MESSAGE.ERROR_OCCURRED\"]})}}}sendPassword(){try{const e=new m.L;e.userName=this.loginForm.controls.userName.value,console.log(\"Sending password for user: \"+e.userName),null===e.userName||\"\"===e.userName?this.translate.get([\"VALIDATION.USER_NAME_REQUIRED\",\"COMMON.ERROR\"]).subscribe(e=>{this.error=e[\"VALIDATION.USER_NAME_REQUIRED\"]}):this.appService.resetPassword(e).subscribe(()=>{this.translate.get([\"MESSAGE.PASSWORD_SENT\",\"COMMON.SUCCESS\"]).subscribe(e=>{this.error=e[\"MESSAGE.PASSWORD_SENT\"]})})}catch(e){this.translate.get([\"MESSAGE.ERROR_OCCURRED\",\"COMMON.ERROR\"]).subscribe(e=>{this.error=e[\"MESSAGE.ERROR_OCCURRED\"]})}}}return e.\\u0275fac=function(t){return new(t||e)(p[\"\\u0275\\u0275directiveInject\"](i.d),p[\"\\u0275\\u0275directiveInject\"](a.d),p[\"\\u0275\\u0275directiveInject\"](s.a),p[\"\\u0275\\u0275directiveInject\"](d.d),p[\"\\u0275\\u0275directiveInject\"](c.a),p[\"\\u0275\\u0275directiveInject\"](a.a))},e.\\u0275cmp=p[\"\\u0275\\u0275defineComponent\"]({type:e,selectors:[[\"app-login\"]],decls:45,vars:31,consts:[[1,\"p-3\"],[1,\"theme-container\"],[\"fxLayout\",\"row\",\"fxLayoutAlign\",\"center center\",1,\"my-3\"],[\"fxLayout\",\"column\",\"fxLayoutAlign\",\"center center\",1,\"text-center\"],[1,\"uppercase\"],[\"mat-button\",\"\",\"color\",\"accent\",1,\"w-100\",3,\"routerLink\"],[3,\"formGroup\",\"ngSubmit\"],[\"appearance\",\"outline\",1,\"w-100\",\"mt-2\"],[\"matPrefix\",\"\",1,\"mr-1\",\"text-muted\"],[\"matInput\",\"\",\"placeholder\",\"Email\",\"formControlName\",\"email\",\"required\",\"\"],[4,\"ngIf\"],[\"appearance\",\"outline\",1,\"w-100\",\"mt-1\"],[\"matInput\",\"\",\"placeholder\",\"Password\",\"formControlName\",\"password\",\"required\",\"\",3,\"type\"],[\"mat-icon-button\",\"\",\"matSuffix\",\"\",\"type\",\"button\",1,\"text-muted\",3,\"click\"],[1,\"text-center\",\"mt-2\"],[\"mat-raised-button\",\"\",\"color\",\"accent\",\"type\",\"submit\",1,\"uppercase\"],[\"fxLayout\",\"column\",\"fxLayoutAlign\",\"center center\",\"class\",\"text-center\",4,\"ngIf\"],[\"fxLayoutAlign\",\"end center\"],[\"mat-button\",\"\",3,\"click\"],[1,\"text-muted\"],[1,\"mx-1\"],[\"mat-button\",\"\",\"color\",\"accent\",1,\"w-100\"]],template:function(e,t){1&e&&(p[\"\\u0275\\u0275elementStart\"](0,\"div\",0),p[\"\\u0275\\u0275elementStart\"](1,\"div\",1),p[\"\\u0275\\u0275elementStart\"](2,\"div\",2),p[\"\\u0275\\u0275elementStart\"](3,\"mat-card\"),p[\"\\u0275\\u0275elementStart\"](4,\"div\",3),p[\"\\u0275\\u0275elementStart\"](5,\"h1\",4),p[\"\\u0275\\u0275text\"](6),p[\"\\u0275\\u0275pipe\"](7,\"translate\"),p[\"\\u0275\\u0275elementEnd\"](),p[\"\\u0275\\u0275elementStart\"](8,\"a\",5),p[\"\\u0275\\u0275text\"](9),p[\"\\u0275\\u0275pipe\"](10,\"translate\"),p[\"\\u0275\\u0275elementEnd\"](),p[\"\\u0275\\u0275elementEnd\"](),p[\"\\u0275\\u0275elementStart\"](11,\"form\",6),p[\"\\u0275\\u0275listener\"](\"ngSubmit\",(function(){return t.login(t.loginForm.value)})),p[\"\\u0275\\u0275elementStart\"](12,\"mat-form-field\",7),p[\"\\u0275\\u0275elementStart\"](13,\"mat-icon\",8),p[\"\\u0275\\u0275text\"](14,\"person\"),p[\"\\u0275\\u0275elementEnd\"](),p[\"\\u0275\\u0275elementStart\"](15,\"mat-label\"),p[\"\\u0275\\u0275text\"](16),p[\"\\u0275\\u0275pipe\"](17,\"translate\"),p[\"\\u0275\\u0275elementEnd\"](),p[\"\\u0275\\u0275element\"](18,\"input\",9),p[\"\\u0275\\u0275template\"](19,f,3,3,\"mat-error\",10),p[\"\\u0275\\u0275template\"](20,v,3,3,\"mat-error\",10),p[\"\\u0275\\u0275elementEnd\"](),p[\"\\u0275\\u0275elementStart\"](21,\"mat-form-field\",11),p[\"\\u0275\\u0275elementStart\"](22,\"mat-icon\",8),p[\"\\u0275\\u0275text\"](23,\"lock\"),p[\"\\u0275\\u0275elementEnd\"](),p[\"\\u0275\\u0275elementStart\"](24,\"mat-label\"),p[\"\\u0275\\u0275text\"](25),p[\"\\u0275\\u0275pipe\"](26,\"translate\"),p[\"\\u0275\\u0275elementEnd\"](),p[\"\\u0275\\u0275element\"](27,\"input\",12),p[\"\\u0275\\u0275template\"](28,x,3,3,\"mat-error\",10),p[\"\\u0275\\u0275template\"](29,R,3,3,\"mat-error\",10),p[\"\\u0275\\u0275elementStart\"](30,\"button\",13),p[\"\\u0275\\u0275listener\"](\"click\",(function(){return t.hide=!t.hide})),p[\"\\u0275\\u0275elementStart\"](31,\"mat-icon\"),p[\"\\u0275\\u0275text\"](32),p[\"\\u0275\\u0275elementEnd\"](),p[\"\\u0275\\u0275elementEnd\"](),p[\"\\u0275\\u0275elementEnd\"](),p[\"\\u0275\\u0275elementStart\"](33,\"div\",14),p[\"\\u0275\\u0275elementStart\"](34,\"button\",15),p[\"\\u0275\\u0275text\"](35),p[\"\\u0275\\u0275pipe\"](36,\"translate\"),p[\"\\u0275\\u0275elementEnd\"](),p[\"\\u0275\\u0275elementEnd\"](),p[\"\\u0275\\u0275elementEnd\"](),p[\"\\u0275\\u0275template\"](37,b,3,1,\"div\",16),p[\"\\u0275\\u0275elementStart\"](38,\"mat-card-actions\",17),p[\"\\u0275\\u0275elementStart\"](39,\"button\",18),p[\"\\u0275\\u0275listener\"](\"click\",(function(){return t.sendPassword()})),p[\"\\u0275\\u0275elementStart\"](40,\"mat-icon\",19),p[\"\\u0275\\u0275text\"](41,\"vpn_key\"),p[\"\\u0275\\u0275elementEnd\"](),p[\"\\u0275\\u0275elementStart\"](42,\"span\",20),p[\"\\u0275\\u0275text\"](43),p[\"\\u0275\\u0275pipe\"](44,\"translate\"),p[\"\\u0275\\u0275elementEnd\"](),p[\"\\u0275\\u0275elementEnd\"](),p[\"\\u0275\\u0275elementEnd\"](),p[\"\\u0275\\u0275elementEnd\"](),p[\"\\u0275\\u0275elementEnd\"](),p[\"\\u0275\\u0275elementEnd\"](),p[\"\\u0275\\u0275elementEnd\"]()),2&e&&(p[\"\\u0275\\u0275advance\"](3),p[\"\\u0275\\u0275styleProp\"](\"max-width\",500,\"px\"),p[\"\\u0275\\u0275advance\"](3),p[\"\\u0275\\u0275textInterpolate\"](p[\"\\u0275\\u0275pipeBind1\"](7,17,\"COMMON.SIGN_IN\")),p[\"\\u0275\\u0275advance\"](2),p[\"\\u0275\\u0275property\"](\"routerLink\",p[\"\\u0275\\u0275pureFunction1\"](29,O,t.action)),p[\"\\u0275\\u0275advance\"](1),p[\"\\u0275\\u0275textInterpolate\"](p[\"\\u0275\\u0275pipeBind1\"](10,19,\"COMMON.NEW_REGISTER\")),p[\"\\u0275\\u0275advance\"](2),p[\"\\u0275\\u0275property\"](\"formGroup\",t.loginForm),p[\"\\u0275\\u0275advance\"](5),p[\"\\u0275\\u0275textInterpolate\"](p[\"\\u0275\\u0275pipeBind1\"](17,21,\"COMMON.E_MAIL\")),p[\"\\u0275\\u0275advance\"](3),p[\"\\u0275\\u0275property\"](\"ngIf\",null==t.loginForm.controls.email.errors?null:t.loginForm.controls.email.errors.required),p[\"\\u0275\\u0275advance\"](1),p[\"\\u0275\\u0275property\"](\"ngIf\",t.loginForm.controls.email.hasError(\"invalidEmail\")),p[\"\\u0275\\u0275advance\"](5),p[\"\\u0275\\u0275textInterpolate\"](p[\"\\u0275\\u0275pipeBind1\"](26,23,\"COMMON.PASSWORD\")),p[\"\\u0275\\u0275advance\"](2),p[\"\\u0275\\u0275property\"](\"type\",t.hide?\"password\":\"text\"),p[\"\\u0275\\u0275advance\"](1),p[\"\\u0275\\u0275property\"](\"ngIf\",null==t.loginForm.controls.password.errors?null:t.loginForm.controls.password.errors.required),p[\"\\u0275\\u0275advance\"](1),p[\"\\u0275\\u0275property\"](\"ngIf\",t.loginForm.controls.password.hasError(\"minlength\")),p[\"\\u0275\\u0275advance\"](3),p[\"\\u0275\\u0275textInterpolate\"](t.hide?\"visibility_off\":\"visibility\"),p[\"\\u0275\\u0275advance\"](3),p[\"\\u0275\\u0275textInterpolate1\"](\" \",p[\"\\u0275\\u0275pipeBind1\"](36,25,\"COMMON.SIGN_IN\"),\" \"),p[\"\\u0275\\u0275advance\"](2),p[\"\\u0275\\u0275property\"](\"ngIf\",t.error),p[\"\\u0275\\u0275advance\"](6),p[\"\\u0275\\u0275textInterpolate\"](p[\"\\u0275\\u0275pipeBind1\"](44,27,\"MESSAGE.SEND_PASSWORD\")))},directives:[u.c,u.b,E.a,S.a,a.g,i.u,i.n,i.g,g.c,h.a,g.g,g.f,I.b,i.b,i.m,i.f,i.s,r.NgIf,S.b,g.h,E.b,g.b],pipes:[d.c],styles:[\".auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}\"]}),e})(),pathMatch:\"full\"}];let A=(()=>{class e{}return e.\\u0275mod=p[\"\\u0275\\u0275defineNgModule\"]({type:e}),e.\\u0275inj=p[\"\\u0275\\u0275defineInjector\"]({factory:function(t){return new(t||e)},imports:[[r.CommonModule,a.h.forChild(M),o.a,d.b]]}),e})()}}]);","extractedComments":[]}