{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{mDHw:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"routes\",(function(){return routes})),__webpack_require__.d(__webpack_exports__,\"PaymentModule\",(function(){return payment_module_PaymentModule}));var common=__webpack_require__(\"ofXK\"),router=__webpack_require__(\"tyNb\"),agm_core=__webpack_require__(\"pxUr\"),mat_video=__webpack_require__(\"FGZe\"),shared_module=__webpack_require__(\"PCNd\"),ngx_translate_core=__webpack_require__(\"sYmb\"),core=__webpack_require__(\"fXoL\"),app_service=__webpack_require__(\"F5nt\"),app_models=__webpack_require__(\"FFMg\"),app_settings=__webpack_require__(\"/RaO\"),baseComponent=__webpack_require__(\"Vy8h\"),token_storage=__webpack_require__(\"xgk8\"),stepper=__webpack_require__(\"xHqg\"),flex=__webpack_require__(\"XiUz\"),form_field=__webpack_require__(\"kmnG\"),input=__webpack_require__(\"qFsG\"),autocomplete=__webpack_require__(\"/1cH\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),icon=__webpack_require__(\"NFeN\"),fesm2015_button=__webpack_require__(\"bTqV\"),fesm2015_select=__webpack_require__(\"d3UM\"),fesm2015_core=__webpack_require__(\"FKr1\"),fesm2015_radio=__webpack_require__(\"QibW\"),progress_spinner=__webpack_require__(\"Xa2L\");const _c0=[\"stepper\"];function PaymentComponent_mat_horizontal_stepper_1_ng_template_3_Template(rf,ctx){1&rf&&(core[\"ɵɵtext\"](0),core[\"ɵɵpipe\"](1,\"translate\")),2&rf&&core[\"ɵɵtextInterpolate\"](core[\"ɵɵpipeBind1\"](1,1,\"COMMON.PROJECT\"))}function PaymentComponent_mat_horizontal_stepper_1_mat_option_15_Template(rf,ctx){if(1&rf){const _r20=core[\"ɵɵgetCurrentView\"]();core[\"ɵɵelementStart\"](0,\"mat-option\",43),core[\"ɵɵlistener\"](\"onSelectionChange\",(function(){core[\"ɵɵrestoreView\"](_r20);const pOption_r18=ctx.$implicit;return core[\"ɵɵnextContext\"](2).transaction.project=pOption_r18})),core[\"ɵɵtext\"](1),core[\"ɵɵelementEnd\"]()}if(2&rf){const pOption_r18=ctx.$implicit;core[\"ɵɵproperty\"](\"value\",pOption_r18.title),core[\"ɵɵadvance\"](1),core[\"ɵɵtextInterpolate1\"](\" \",pOption_r18.title,\" \")}}function PaymentComponent_mat_horizontal_stepper_1_ng_template_24_Template(rf,ctx){1&rf&&(core[\"ɵɵtext\"](0),core[\"ɵɵpipe\"](1,\"translate\")),2&rf&&core[\"ɵɵtextInterpolate\"](core[\"ɵɵpipeBind1\"](1,1,\"COMMON.AMOUNT\"))}function PaymentComponent_mat_horizontal_stepper_1_mat_error_33_Template(rf,ctx){1&rf&&(core[\"ɵɵelementStart\"](0,\"mat-error\",44),core[\"ɵɵtext\"](1),core[\"ɵɵpipe\"](2,\"translate\"),core[\"ɵɵelementEnd\"]()),2&rf&&(core[\"ɵɵadvance\"](1),core[\"ɵɵtextInterpolate1\"](\" \",core[\"ɵɵpipeBind1\"](2,1,\"VALIDATION.FIELD_REQUIRED\"),\" \"))}function PaymentComponent_mat_horizontal_stepper_1_ng_template_55_Template(rf,ctx){1&rf&&(core[\"ɵɵtext\"](0),core[\"ɵɵpipe\"](1,\"translate\")),2&rf&&core[\"ɵɵtextInterpolate\"](core[\"ɵɵpipeBind1\"](1,1,\"COMMON.PAY\"))}function PaymentComponent_mat_horizontal_stepper_1_mat_radio_button_57_Template(rf,ctx){1&rf&&(core[\"ɵɵelementStart\"](0,\"mat-radio-button\",45),core[\"ɵɵtext\"](1),core[\"ɵɵpipe\"](2,\"translate\"),core[\"ɵɵelementEnd\"]()),2&rf&&(core[\"ɵɵadvance\"](1),core[\"ɵɵtextInterpolate1\"](\" \",core[\"ɵɵpipeBind1\"](2,1,\"COMMON.CREDIT_CARD\"),\" \"))}function PaymentComponent_mat_horizontal_stepper_1_mat_radio_button_58_Template(rf,ctx){1&rf&&(core[\"ɵɵelementStart\"](0,\"mat-radio-button\",46),core[\"ɵɵtext\"](1,\" TMoney \"),core[\"ɵɵelementEnd\"]())}function PaymentComponent_mat_horizontal_stepper_1_mat_radio_button_59_Template(rf,ctx){1&rf&&(core[\"ɵɵelementStart\"](0,\"mat-radio-button\",47),core[\"ɵɵtext\"](1,\" Flooz \"),core[\"ɵɵelementEnd\"]())}function PaymentComponent_mat_horizontal_stepper_1_mat_error_80_Template(rf,ctx){1&rf&&(core[\"ɵɵelementStart\"](0,\"mat-error\",44),core[\"ɵɵtext\"](1),core[\"ɵɵpipe\"](2,\"translate\"),core[\"ɵɵelementEnd\"]()),2&rf&&(core[\"ɵɵadvance\"](1),core[\"ɵɵtextInterpolate1\"](\" \",core[\"ɵɵpipeBind1\"](2,1,\"VALIDATION.FIELD_REQUIRED\"),\" \"))}function PaymentComponent_mat_horizontal_stepper_1_mat_error_89_Template(rf,ctx){if(1&rf&&(core[\"ɵɵelementStart\"](0,\"mat-error\",44),core[\"ɵɵelementStart\"](1,\"h3\"),core[\"ɵɵtext\"](2),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"]()),2&rf){const ctx_r15=core[\"ɵɵnextContext\"](2);core[\"ɵɵadvance\"](2),core[\"ɵɵtextInterpolate\"](ctx_r15.errors)}}function PaymentComponent_mat_horizontal_stepper_1_mat_error_90_Template(rf,ctx){if(1&rf&&(core[\"ɵɵelementStart\"](0,\"mat-error\",48),core[\"ɵɵelementStart\"](1,\"h3\"),core[\"ɵɵtext\"](2),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"]()),2&rf){const ctx_r16=core[\"ɵɵnextContext\"](2);core[\"ɵɵadvance\"](2),core[\"ɵɵtextInterpolate\"](ctx_r16.messages)}}function PaymentComponent_mat_horizontal_stepper_1_mat_spinner_91_Template(rf,ctx){1&rf&&(core[\"ɵɵelementStart\"](0,\"mat-spinner\"),core[\"ɵɵtext\"](1,\" Payment processing. Please don't close ...\"),core[\"ɵɵelementEnd\"]())}function PaymentComponent_mat_horizontal_stepper_1_Template(rf,ctx){if(1&rf){const _r22=core[\"ɵɵgetCurrentView\"]();core[\"ɵɵelementStart\"](0,\"mat-horizontal-stepper\",3,4),core[\"ɵɵelementStart\"](2,\"mat-step\",5),core[\"ɵɵtemplate\"](3,PaymentComponent_mat_horizontal_stepper_1_ng_template_3_Template,2,3,\"ng-template\",6),core[\"ɵɵelementStart\"](4,\"div\",7),core[\"ɵɵelementStart\"](5,\"mat-form-field\",8),core[\"ɵɵelementStart\"](6,\"mat-label\"),core[\"ɵɵtext\"](7),core[\"ɵɵpipe\"](8,\"translate\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](9,\"input\",9),core[\"ɵɵlistener\"](\"ngModelChange\",(function($event){return core[\"ɵɵrestoreView\"](_r22),core[\"ɵɵnextContext\"]().currentProjectOption=$event}))(\"ngModelChange\",(function(){core[\"ɵɵrestoreView\"](_r22);const ctx_r23=core[\"ɵɵnextContext\"]();return ctx_r23.filterProjectOptions(ctx_r23.currentProjectOption)})),core[\"ɵɵpipe\"](10,\"translate\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](11,\"mat-icon\",10),core[\"ɵɵtext\"](12,\"keyboard_arrow_down\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](13,\"mat-autocomplete\",11,12),core[\"ɵɵtemplate\"](15,PaymentComponent_mat_horizontal_stepper_1_mat_option_15_Template,2,2,\"mat-option\",13),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](16,\"div\",14),core[\"ɵɵelementStart\"](17,\"div\",7),core[\"ɵɵelementStart\"](18,\"button\",15),core[\"ɵɵlistener\"](\"click\",(function(){return core[\"ɵɵrestoreView\"](_r22),core[\"ɵɵnextContext\"]().goBack()})),core[\"ɵɵtext\"](19,\"Back\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](20,\"div\",7),core[\"ɵɵelementStart\"](21,\"button\",16),core[\"ɵɵlistener\"](\"click\",(function(){return core[\"ɵɵrestoreView\"](_r22),core[\"ɵɵnextContext\"]().goForward()})),core[\"ɵɵtext\"](22,\"Next\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](23,\"mat-step\",5),core[\"ɵɵtemplate\"](24,PaymentComponent_mat_horizontal_stepper_1_ng_template_24_Template,2,3,\"ng-template\",6),core[\"ɵɵelementStart\"](25,\"div\",14),core[\"ɵɵelementStart\"](26,\"div\",7),core[\"ɵɵelementStart\"](27,\"mat-form-field\",8),core[\"ɵɵelementStart\"](28,\"mat-label\"),core[\"ɵɵtext\"](29),core[\"ɵɵpipe\"](30,\"translate\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](31,\"input\",17,18),core[\"ɵɵlistener\"](\"ngModelChange\",(function($event){return core[\"ɵɵrestoreView\"](_r22),core[\"ɵɵnextContext\"]().transaction.amount=$event})),core[\"ɵɵelementEnd\"](),core[\"ɵɵtemplate\"](33,PaymentComponent_mat_horizontal_stepper_1_mat_error_33_Template,3,3,\"mat-error\",19),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](34,\"div\",7),core[\"ɵɵelementStart\"](35,\"mat-form-field\",20),core[\"ɵɵelementStart\"](36,\"mat-label\"),core[\"ɵɵtext\"](37),core[\"ɵɵpipe\"](38,\"translate\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](39,\"mat-select\",21),core[\"ɵɵlistener\"](\"ngModelChange\",(function($event){return core[\"ɵɵrestoreView\"](_r22),core[\"ɵɵnextContext\"]().transaction.currencyCode=$event})),core[\"ɵɵpipe\"](40,\"translate\"),core[\"ɵɵelementStart\"](41,\"mat-option\",22),core[\"ɵɵtext\"](42,\" USD \"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](43,\"mat-option\",22),core[\"ɵɵtext\"](44,\" CFA \"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](45,\"mat-option\",22),core[\"ɵɵtext\"](46,\" EUR \"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](47,\"div\",14),core[\"ɵɵelementStart\"](48,\"div\",7),core[\"ɵɵelementStart\"](49,\"button\",15),core[\"ɵɵlistener\"](\"click\",(function(){return core[\"ɵɵrestoreView\"](_r22),core[\"ɵɵnextContext\"]().goBack()})),core[\"ɵɵtext\"](50,\"Back\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](51,\"div\",7),core[\"ɵɵelementStart\"](52,\"button\",16),core[\"ɵɵlistener\"](\"click\",(function(){return core[\"ɵɵrestoreView\"](_r22),core[\"ɵɵnextContext\"]().goForward()})),core[\"ɵɵtext\"](53,\"Next\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](54,\"mat-step\"),core[\"ɵɵtemplate\"](55,PaymentComponent_mat_horizontal_stepper_1_ng_template_55_Template,2,3,\"ng-template\",6),core[\"ɵɵelementStart\"](56,\"mat-radio-group\",23),core[\"ɵɵlistener\"](\"ngModelChange\",(function($event){return core[\"ɵɵrestoreView\"](_r22),core[\"ɵɵnextContext\"]().transaction.paymentMethod=$event})),core[\"ɵɵtemplate\"](57,PaymentComponent_mat_horizontal_stepper_1_mat_radio_button_57_Template,3,3,\"mat-radio-button\",24),core[\"ɵɵtemplate\"](58,PaymentComponent_mat_horizontal_stepper_1_mat_radio_button_58_Template,2,0,\"mat-radio-button\",25),core[\"ɵɵtemplate\"](59,PaymentComponent_mat_horizontal_stepper_1_mat_radio_button_59_Template,2,0,\"mat-radio-button\",26),core[\"ɵɵelementEnd\"](),core[\"ɵɵelement\"](60,\"br\"),core[\"ɵɵelement\"](61,\"br\"),core[\"ɵɵelementStart\"](62,\"div\",27),core[\"ɵɵelementStart\"](63,\"form\",28),core[\"ɵɵelement\"](64,\"div\",29),core[\"ɵɵelement\"](65,\"br\"),core[\"ɵɵelement\"](66,\"br\"),core[\"ɵɵelementStart\"](67,\"button\",30),core[\"ɵɵelement\"](68,\"div\",31),core[\"ɵɵelementStart\"](69,\"span\",32),core[\"ɵɵtext\"](70),core[\"ɵɵpipe\"](71,\"translate\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelement\"](72,\"span\",33),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](73,\"div\",27),core[\"ɵɵelementStart\"](74,\"mat-form-field\",8),core[\"ɵɵelementStart\"](75,\"mat-label\"),core[\"ɵɵtext\"](76),core[\"ɵɵpipe\"](77,\"translate\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](78,\"input\",34,35),core[\"ɵɵlistener\"](\"ngModelChange\",(function($event){return core[\"ɵɵrestoreView\"](_r22),core[\"ɵɵnextContext\"]().transaction.phone=$event})),core[\"ɵɵelementEnd\"](),core[\"ɵɵtemplate\"](80,PaymentComponent_mat_horizontal_stepper_1_mat_error_80_Template,3,3,\"mat-error\",19),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](81,\"div\",14),core[\"ɵɵelementStart\"](82,\"div\",36),core[\"ɵɵelementStart\"](83,\"div\",37),core[\"ɵɵelementStart\"](84,\"button\",38),core[\"ɵɵlistener\"](\"click\",(function(){return core[\"ɵɵrestoreView\"](_r22),core[\"ɵɵnextContext\"]().saveTransaction()})),core[\"ɵɵelementStart\"](85,\"span\",39),core[\"ɵɵtext\"](86),core[\"ɵɵpipe\"](87,\"translate\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](88,\"mat-step\"),core[\"ɵɵtemplate\"](89,PaymentComponent_mat_horizontal_stepper_1_mat_error_89_Template,3,1,\"mat-error\",19),core[\"ɵɵtemplate\"](90,PaymentComponent_mat_horizontal_stepper_1_mat_error_90_Template,3,1,\"mat-error\",40),core[\"ɵɵtemplate\"](91,PaymentComponent_mat_horizontal_stepper_1_mat_spinner_91_Template,2,0,\"mat-spinner\",41),core[\"ɵɵelementStart\"](92,\"div\",14),core[\"ɵɵelementStart\"](93,\"div\",42),core[\"ɵɵelementStart\"](94,\"mat-label\"),core[\"ɵɵtext\"](95),core[\"ɵɵpipe\"](96,\"translate\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](97,\"div\",42),core[\"ɵɵelementStart\"](98,\"mat-label\"),core[\"ɵɵtext\"](99),core[\"ɵɵpipe\"](100,\"translate\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](101,\"div\",42),core[\"ɵɵelementStart\"](102,\"mat-label\"),core[\"ɵɵtext\"](103),core[\"ɵɵpipe\"](104,\"translate\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"]()}if(2&rf){const _r4=core[\"ɵɵreference\"](14),_r7=core[\"ɵɵreference\"](32),_r13=core[\"ɵɵreference\"](79),ctx_r0=core[\"ɵɵnextContext\"]();core[\"ɵɵproperty\"](\"linear\",!0),core[\"ɵɵadvance\"](7),core[\"ɵɵtextInterpolate1\"](\" \",core[\"ɵɵpipeBind1\"](8,39,\"COMMON.PROJECT\"),\"\"),core[\"ɵɵadvance\"](2),core[\"ɵɵpropertyInterpolate\"](\"placeholder\",core[\"ɵɵpipeBind1\"](10,41,\"COMMON.SELECT_PROJECT\")),core[\"ɵɵproperty\"](\"matAutocomplete\",_r4)(\"ngModel\",ctx_r0.currentProjectOption)(\"disabled\",ctx_r0.projectId&&0!==ctx_r0.projectId),core[\"ɵɵadvance\"](6),core[\"ɵɵproperty\"](\"ngForOf\",ctx_r0.filteredProjectOptions),core[\"ɵɵadvance\"](6),core[\"ɵɵproperty\"](\"disabled\",!ctx_r0.transaction.project),core[\"ɵɵadvance\"](8),core[\"ɵɵtextInterpolate1\"](\" \",core[\"ɵɵpipeBind1\"](30,43,\"COMMON.AMOUNT\"),\"\"),core[\"ɵɵadvance\"](2),core[\"ɵɵproperty\"](\"ngModel\",ctx_r0.transaction.amount),core[\"ɵɵadvance\"](2),core[\"ɵɵproperty\"](\"ngIf\",_r7.invalid),core[\"ɵɵadvance\"](4),core[\"ɵɵtextInterpolate\"](core[\"ɵɵpipeBind1\"](38,45,\"COMMON.CURRENCY\")),core[\"ɵɵadvance\"](2),core[\"ɵɵpropertyInterpolate\"](\"placeholder\",core[\"ɵɵpipeBind1\"](40,47,\"COMMON.SELECT\")),core[\"ɵɵproperty\"](\"compareWith\",ctx_r0.compareObjects)(\"ngModel\",ctx_r0.transaction.currencyCode),core[\"ɵɵadvance\"](2),core[\"ɵɵproperty\"](\"value\",\"USD\"),core[\"ɵɵadvance\"](2),core[\"ɵɵproperty\"](\"value\",\"XOF\"),core[\"ɵɵadvance\"](2),core[\"ɵɵproperty\"](\"value\",\"EUR\"),core[\"ɵɵadvance\"](7),core[\"ɵɵproperty\"](\"disabled\",_r7.invalid),core[\"ɵɵadvance\"](4),core[\"ɵɵproperty\"](\"ngModel\",ctx_r0.transaction.paymentMethod),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",ctx_r0.appService.company.acceptCardPayment),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",ctx_r0.appService.company.acceptTmoneyPayment),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",ctx_r0.appService.company.acceptFloozPayment),core[\"ɵɵadvance\"](3),core[\"ɵɵproperty\"](\"hidden\",\"CARD\"!==ctx_r0.transaction.paymentMethod),core[\"ɵɵadvance\"](8),core[\"ɵɵtextInterpolate\"](core[\"ɵɵpipeBind1\"](71,49,\"COMMON.PAY\")),core[\"ɵɵadvance\"](3),core[\"ɵɵproperty\"](\"hidden\",\"TMONEY\"!==ctx_r0.transaction.paymentMethod&&\"FLOOZ\"!==ctx_r0.transaction.paymentMethod),core[\"ɵɵadvance\"](3),core[\"ɵɵtextInterpolate1\"](\" \",core[\"ɵɵpipeBind1\"](77,51,\"COMMON.PHONE\"),\"\"),core[\"ɵɵadvance\"](2),core[\"ɵɵproperty\"](\"ngModel\",ctx_r0.transaction.phone),core[\"ɵɵadvance\"](2),core[\"ɵɵproperty\"](\"ngIf\",_r13.invalid),core[\"ɵɵadvance\"](6),core[\"ɵɵtextInterpolate\"](core[\"ɵɵpipeBind1\"](87,53,\"COMMON.PAY\")),core[\"ɵɵadvance\"](3),core[\"ɵɵproperty\"](\"ngIf\",ctx_r0.errors),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",ctx_r0.messages),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",!ctx_r0.messages&&!ctx_r0.errors),core[\"ɵɵadvance\"](4),core[\"ɵɵtextInterpolate2\"](\" \",core[\"ɵɵpipeBind1\"](96,55,\"COMMON.PROJECT\"),\": \",ctx_r0.currentProjectOption,\" \"),core[\"ɵɵadvance\"](4),core[\"ɵɵtextInterpolate2\"](\" \",core[\"ɵɵpipeBind1\"](100,57,\"COMMON.AMOUNT\"),\": \",ctx_r0.transaction.amount,\" \"),core[\"ɵɵadvance\"](4),core[\"ɵɵtextInterpolate2\"](\" \",core[\"ɵɵpipeBind1\"](104,59,\"COMMON.CURRENCY\"),\": \",ctx_r0.transaction.currencyCode,\" \")}}function PaymentComponent_div_2_mat_error_1_Template(rf,ctx){if(1&rf&&(core[\"ɵɵelementStart\"](0,\"mat-error\",44),core[\"ɵɵelementStart\"](1,\"h3\"),core[\"ɵɵtext\"](2),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"]()),2&rf){const ctx_r33=core[\"ɵɵnextContext\"](2);core[\"ɵɵadvance\"](2),core[\"ɵɵtextInterpolate\"](ctx_r33.errors)}}function PaymentComponent_div_2_mat_error_2_Template(rf,ctx){if(1&rf&&(core[\"ɵɵelementStart\"](0,\"mat-error\",48),core[\"ɵɵelementStart\"](1,\"h3\"),core[\"ɵɵtext\"](2),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"]()),2&rf){const ctx_r34=core[\"ɵɵnextContext\"](2);core[\"ɵɵadvance\"](2),core[\"ɵɵtextInterpolate\"](ctx_r34.messages)}}function PaymentComponent_div_2_Template(rf,ctx){if(1&rf&&(core[\"ɵɵelementStart\"](0,\"div\",49),core[\"ɵɵtemplate\"](1,PaymentComponent_div_2_mat_error_1_Template,3,1,\"mat-error\",19),core[\"ɵɵtemplate\"](2,PaymentComponent_div_2_mat_error_2_Template,3,1,\"mat-error\",40),core[\"ɵɵelementEnd\"]()),2&rf){const ctx_r1=core[\"ɵɵnextContext\"]();core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",ctx_r1.errors),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",ctx_r1.messages)}}const routes=[{path:\"\",component:(()=>{class PaymentComponent extends baseComponent.a{constructor(appService,appSettings,translate,tokenStorage,activatedRoute){super(translate,tokenStorage),this.appService=appService,this.appSettings=appSettings,this.translate=translate,this.tokenStorage=tokenStorage,this.activatedRoute=activatedRoute,this.transaction=new app_models.L,this.result={},this.saveEvent=new core.EventEmitter,this.action=\"processing\"}ngOnInit(){console.log(\"I am here ...\"),this.activatedRoute.params.subscribe(params=>{0!==params.projectId&&(this.projectId=params.projectId)}),this.getActiveProjects()}ngAfterViewInit(){setTimeout(()=>{this.setStripeSecret()},500),this.transaction.currencyCode=\"USD\"}setStripeSecret(){this.appService.getObject(\"/service/Payment/stripe-key\").toPromise().then(result=>{this.stripe=Stripe(result.publishableKey)})}createPaymentIntent(){this.appService.saveWithUrl(\"/service/Payment/clientSecret\",this.transaction).toPromise().then(result=>result).then(data=>this.setupElements(data)).then(data=>{this.data=data,document.querySelector(\"button\").disabled=!1,document.getElementById(\"submit\").removeAttribute(\"disabled\"),document.getElementById(\"payment-form\").addEventListener(\"submit\",this.handleCardSave.bind(this))})}setupElements(data){const card=this.stripe.elements().create(\"card\",{style:{base:{color:\"#32325d\",fontFamily:'\"Helvetica Neue\", Helvetica, sans-serif',fontSmoothing:\"antialiased\",fontSize:\"16px\",\"::placeholder\":{color:\"#aab7c4\"}},invalid:{color:\"#fa755a\",iconColor:\"#fa755a\"}}});return document.getElementById(\"card-element\"),card.mount(\"#card-element\"),{stripe:this.stripe,card:card,clientSecret:data.clientSecret}}handleCardSave(event){event.preventDefault(),document.getElementById(\"submit\").setAttribute(\"disabled\",\"disabled\"),this.submitPayment(this.data.stripe,this.data.card,this.data.clientSecret,this.translate,this.result,this.myStepper,this.save,this.appService,this.transaction,this.tokenStorage.getUserId(),this.processResult)}submitPayment(stripe,card,clientSecret,translate,myResult,myStepper,saveFct,appService,transaction,userId,processResult){this.errors=\"\",stripe.confirmCardPayment(clientSecret,{payment_method:{card:card}}).then((function(result){result.error?(translate.get([\"MESSAGE.CARD_PAYMENT_FAILED\"]).subscribe(res=>{myResult.messages=res[\"MESSAGE.CARD_PAYMENT_FAILED\"]}),document.getElementById(\"submit\").setAttribute(\"disabled\",\"disabled\")):(translate.get([\"MESSAGE.CARD_PAYMENT_SUCCEDED\"]).subscribe(res=>{myResult.messages=res[\"MESSAGE.CARD_PAYMENT_SUCCEDED\"]}),saveFct(appService,transaction,userId,translate,myResult)),myStepper.selected.completed=!0,myStepper.next()}))}getActiveProjects(){const parameters=[];parameters.push(\"e.project.status = |status|5|Integer\"),this.appService.getAllByCriteriaWithFiles(\"ProjectDesc\",parameters).subscribe(data=>{if(this.projectOptions=data,this.filteredProjectOptions=data,this.projectId)for(const pd of this.projectOptions)pd.project.id===Number(this.projectId)&&(this.currentProjectOption=pd.title,this.transaction.project=pd.project)})}save(appService,transaction,userId,translate,myResult){myResult.errors=void 0,myResult.messages=void 0,transaction.modifiedBy=+userId,transaction.user=new app_models.M,transaction.user.id=+userId,transaction.io=0,appService.save(transaction,\"Transaction\").subscribe(result=>{null===result.errors||0===result.errors.length?translate.get([\"MESSAGE.CARD_PAYMENT_SUCCEDED\"]).subscribe(res=>{myResult.messages=res[\"MESSAGE.CARD_PAYMENT_SUCCEDED\"]}):translate.get([\"MESSAGE.CARD_PAYMENT_FAILED\"]).subscribe(res=>{myResult.messages=res[\"MESSAGE.CARD_PAYMENT_FAILED\"]})})}filterProjectOptions(val){if(val){const filterValue=\"string\"==typeof val?val.toLowerCase():val.title.toLowerCase();this.filteredProjectOptions=this.projectOptions.filter(element=>element.title.toLowerCase().startsWith(filterValue))}else this.filteredProjectOptions=this.projectOptions}clear(){this.transaction=new app_models.L}goBack(){this.myStepper.previous()}goForward(){this.myStepper.selected.completed=!0,this.myStepper.next(),2===this.myStepper.selectedIndex&&this.createPaymentIntent()}saveTransaction(){this.myStepper.next(),this.transaction.modifiedBy=+this.tokenStorage.getUserId(),this.transaction.user=new app_models.M,this.transaction.user.id=+this.tokenStorage.getUserId(),this.appService.saveWithUrl(\"/service/Payment/saveTransaction\",this.transaction).subscribe(data=>{null===data.errors||0===data.errors.length?this.translate.get([\"MESSAGE.CARD_PAYMENT_SUCCEDED\"]).subscribe(res=>{this.messages=res[\"MESSAGE.CARD_PAYMENT_SUCCEDED\"]}):this.translate.get([\"MESSAGE.CARD_PAYMENT_FAILED\",\"MESSAGE.\"+data.errors[0]]).subscribe(res=>{this.errors=res[\"MESSAGE.\"+data.errors[0]]}),this.action=\"complete\",this.myStepper.selected.completed=!0,this.myStepper.next()})}}return PaymentComponent.ɵfac=function(t){return new(t||PaymentComponent)(core[\"ɵɵdirectiveInject\"](app_service.a),core[\"ɵɵdirectiveInject\"](app_settings.a),core[\"ɵɵdirectiveInject\"](ngx_translate_core.d),core[\"ɵɵdirectiveInject\"](token_storage.a),core[\"ɵɵdirectiveInject\"](router.a))},PaymentComponent.ɵcmp=core[\"ɵɵdefineComponent\"]({type:PaymentComponent,selectors:[[\"app-payment-component\"]],viewQuery:function(rf,ctx){var _t;1&rf&&core[\"ɵɵviewQuery\"](_c0,!0),2&rf&&core[\"ɵɵqueryRefresh\"](_t=core[\"ɵɵloadQuery\"]())&&(ctx.myStepper=_t.first)},inputs:{projectId:\"projectId\",eventId:\"eventId\"},outputs:{saveEvent:\"saveEvent\"},features:[core[\"ɵɵInheritDefinitionFeature\"]],decls:3,vars:2,consts:[[1,\"theme-container\"],[3,\"linear\",4,\"ngIf\"],[\"fxLayout\",\"row wrap\",\"style\",\"height: 100px;\",4,\"ngIf\"],[3,\"linear\"],[\"stepper\",\"\"],[\"completed\",\"false\"],[\"matStepLabel\",\"\"],[\"fxFlex\",\"100\",\"fxFlex.gt-sm\",\"50\",1,\"p-3\"],[\"appearance\",\"outline\",1,\"w-100\"],[\"type\",\"text\",\"aria-label\",\"Number\",\"name\",\"currentProjectOption\",\"matInput\",\"\",\"required\",\"\",3,\"placeholder\",\"matAutocomplete\",\"ngModel\",\"disabled\",\"ngModelChange\"],[\"matSuffix\",\"\"],[\"id\",\"projOption\"],[\"projectOptionAuto\",\"matAutocomplete\"],[3,\"value\",\"onSelectionChange\",4,\"ngFor\",\"ngForOf\"],[\"fxLayout\",\"row wrap\"],[\"mat-raised-button\",\"\",\"color\",\"secondary\",\"type\",\"button\",3,\"click\"],[\"mat-raised-button\",\"\",\"color\",\"primary\",\"type\",\"button\",2,\"float\",\"right\",3,\"disabled\",\"click\"],[\"matInput\",\"\",\"type\",\"text\",\"id\",\"amount\",\"name\",\"amount\",\"required\",\"\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[\"amount\",\"ngModel\"],[\"severity\",\"error\",4,\"ngIf\"],[\"appearance\",\"outline\",1,\"w-100\",\"mb-3\"],[\"id\",\"currency\",\"name\",\"currency\",3,\"placeholder\",\"compareWith\",\"ngModel\",\"ngModelChange\"],[3,\"value\"],[3,\"ngModel\",\"ngModelChange\"],[\"value\",\"CARD\",\"style\",\"margin-right: 50px;\",4,\"ngIf\"],[\"value\",\"TMONEY\",\"style\",\"margin-right: 50px;\",4,\"ngIf\"],[\"value\",\"FLOOZ\",\"style\",\"margin-right: 50px;\",4,\"ngIf\"],[3,\"hidden\"],[\"id\",\"payment-form\"],[\"id\",\"card-element\"],[\"id\",\"submit\",\"mat-raised-button\",\"\",\"color\",\"primary\"],[\"id\",\"spinner\",1,\"spinner\",\"hidden\"],[\"id\",\"button-text\"],[\"id\",\"order-amount\"],[\"matInput\",\"\",\"type\",\"text\",\"id\",\"phone\",\"name\",\"phone\",\"required\",\"\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[\"phone\",\"ngModel\"],[\"fxFlex\",\"100\",\"fxFlex.gt-sm\",\"100\",1,\"p-3\"],[1,\"text-center\",\"mt-2\"],[\"mat-raised-button\",\"\",\"color\",\"primary\",\"fxLayout\",\"row\",\"fxLayoutAlign\",\"center center\",3,\"click\"],[1,\"mx-1\",\"uppercase\"],[\"severity\",\"message\",4,\"ngIf\"],[4,\"ngIf\"],[\"fxFlex\",\"100\",\"fxFlex.gt-sm\",\"33\",1,\"p-3\"],[3,\"value\",\"onSelectionChange\"],[\"severity\",\"error\"],[\"value\",\"CARD\",2,\"margin-right\",\"50px\"],[\"value\",\"TMONEY\",2,\"margin-right\",\"50px\"],[\"value\",\"FLOOZ\",2,\"margin-right\",\"50px\"],[\"severity\",\"message\"],[\"fxLayout\",\"row wrap\",2,\"height\",\"100px\"]],template:function(rf,ctx){1&rf&&(core[\"ɵɵelementStart\"](0,\"div\",0),core[\"ɵɵtemplate\"](1,PaymentComponent_mat_horizontal_stepper_1_Template,105,61,\"mat-horizontal-stepper\",1),core[\"ɵɵtemplate\"](2,PaymentComponent_div_2_Template,3,2,\"div\",2),core[\"ɵɵelementEnd\"]()),2&rf&&(core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",\"processing\"===ctx.action),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",\"complete\"===ctx.action))},directives:[common.NgIf,stepper.a,stepper.b,stepper.c,flex.a,form_field.c,form_field.f,input.b,autocomplete.c,fesm2015_forms.b,fesm2015_forms.s,fesm2015_forms.m,fesm2015_forms.p,icon.a,form_field.h,autocomplete.a,common.NgForOf,flex.c,fesm2015_button.b,fesm2015_select.a,fesm2015_core.n,fesm2015_radio.b,fesm2015_forms.u,fesm2015_forms.n,fesm2015_forms.o,flex.b,form_field.b,fesm2015_radio.a,progress_spinner.b],pipes:[ngx_translate_core.c],encapsulation:2}),PaymentComponent})(),pathMatch:\"full\"}];let payment_module_PaymentModule=(()=>{class PaymentModule{}return PaymentModule.ɵmod=core[\"ɵɵdefineNgModule\"]({type:PaymentModule}),PaymentModule.ɵinj=core[\"ɵɵdefineInjector\"]({factory:function(t){return new(t||PaymentModule)},imports:[[common.CommonModule,ngx_translate_core.b,router.h.forChild(routes),agm_core.a,mat_video.a,shared_module.a,fesm2015_forms.h]]}),PaymentModule})()}}]);","extractedComments":[]}