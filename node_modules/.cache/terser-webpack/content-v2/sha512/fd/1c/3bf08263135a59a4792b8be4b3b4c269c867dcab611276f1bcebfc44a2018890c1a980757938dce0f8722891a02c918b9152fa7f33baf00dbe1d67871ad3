{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{F4UR:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"routes\",(function(){return routes})),__webpack_require__.d(__webpack_exports__,\"LoginModule\",(function(){return login_module_LoginModule}));var common=__webpack_require__(\"ofXK\"),router=__webpack_require__(\"tyNb\"),shared_module=__webpack_require__(\"PCNd\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),app_validators=__webpack_require__(\"VAss\"),token_storage=__webpack_require__(\"xgk8\"),app_service=__webpack_require__(\"F5nt\"),app_models=__webpack_require__(\"FFMg\"),core=__webpack_require__(\"fXoL\"),ngx_translate_core=__webpack_require__(\"sYmb\"),flex=__webpack_require__(\"XiUz\"),card=__webpack_require__(\"Wp6s\"),fesm2015_button=__webpack_require__(\"bTqV\"),form_field=__webpack_require__(\"kmnG\"),icon=__webpack_require__(\"NFeN\"),input=__webpack_require__(\"qFsG\");function LoginComponent_mat_error_19_Template(rf,ctx){1&rf&&(core[\"ɵɵelementStart\"](0,\"mat-error\"),core[\"ɵɵtext\"](1),core[\"ɵɵpipe\"](2,\"translate\"),core[\"ɵɵelementEnd\"]()),2&rf&&(core[\"ɵɵadvance\"](1),core[\"ɵɵtextInterpolate1\"](\" \",core[\"ɵɵpipeBind1\"](2,1,\"VALIDATION.EMAIL_REQUIRED\"),\"\"))}function LoginComponent_mat_error_20_Template(rf,ctx){1&rf&&(core[\"ɵɵelementStart\"](0,\"mat-error\"),core[\"ɵɵtext\"](1),core[\"ɵɵpipe\"](2,\"translate\"),core[\"ɵɵelementEnd\"]()),2&rf&&(core[\"ɵɵadvance\"](1),core[\"ɵɵtextInterpolate1\"](\" \",core[\"ɵɵpipeBind1\"](2,1,\"VALIDATION.EMAIL_INVALID\"),\" \"))}function LoginComponent_mat_error_28_Template(rf,ctx){1&rf&&(core[\"ɵɵelementStart\"](0,\"mat-error\"),core[\"ɵɵtext\"](1),core[\"ɵɵpipe\"](2,\"translate\"),core[\"ɵɵelementEnd\"]()),2&rf&&(core[\"ɵɵadvance\"](1),core[\"ɵɵtextInterpolate1\"](\" \",core[\"ɵɵpipeBind1\"](2,1,\"VALIDATION.PASSWORD_REQUIRED\"),\"\"))}function LoginComponent_mat_error_29_Template(rf,ctx){1&rf&&(core[\"ɵɵelementStart\"](0,\"mat-error\"),core[\"ɵɵtext\"](1),core[\"ɵɵpipe\"](2,\"translate\"),core[\"ɵɵelementEnd\"]()),2&rf&&(core[\"ɵɵadvance\"](1),core[\"ɵɵtextInterpolate1\"](\" \",core[\"ɵɵpipeBind1\"](2,1,\"VALIDATION.MINIMUM_LENGTH\"),\" 6\"))}function LoginComponent_div_37_Template(rf,ctx){if(1&rf&&(core[\"ɵɵelementStart\"](0,\"div\",3),core[\"ɵɵelementStart\"](1,\"a\",21),core[\"ɵɵtext\"](2),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"]()),2&rf){const ctx_r4=core[\"ɵɵnextContext\"]();core[\"ɵɵadvance\"](2),core[\"ɵɵtextInterpolate\"](ctx_r4.error)}}const _c0=function(a1){return[\"/register\",a1]},routes=[{path:\"\",component:(()=>{class LoginComponent{constructor(fb,router,tokenStorage,translate,appService,route){this.fb=fb,this.router=router,this.tokenStorage=tokenStorage,this.translate=translate,this.appService=appService,this.route=route,this.hide=!0,this.action=0,this.route.params.subscribe(params=>{this.action=params.action,console.log(\"action =\"+this.action)})}ngOnInit(){this.loginForm=this.fb.group({email:[\"\",fesm2015_forms.t.compose([fesm2015_forms.t.required,app_validators.a])],password:[null,fesm2015_forms.t.compose([fesm2015_forms.t.required,fesm2015_forms.t.minLength(6)])],rememberMe:!1})}onLoginFormSubmit(){this.loginForm.valid&&this.router.navigate([\"/\"])}login(values){if(this.loginForm.valid){const user=new app_models.M;user.userName=this.loginForm.controls.email.value,user.password=this.loginForm.controls.password.value;try{this.error=\"\",user.lang=this.translate.currentLang,console.log(\"Current lang=\"+this.translate.currentLang),this.appService.authenticate(user).subscribe(data=>{console.log(data),\"\"!==data.token&&null!==data.token?(console.log(\"login successful\"),this.tokenStorage.saveAuthData(data),this.appService.updateToken(),console.log(\"action = \"+this.action),this.router.navigate(1==this.action?[\"/submit-project/0\"]:[\"/account/user/\"+this.tokenStorage.getUserId()])):(console.log(\"login failed\"),this.translate.get([\"MESSAGE.INVALID_USER_PASS\",\"COMMON.ERROR\"]).subscribe(res=>{this.error=res[\"MESSAGE.INVALID_USER_PASS\"]}))})}catch(e){console.log(\"Exception during login...\"),this.translate.get([\"MESSAGE.ERROR_OCCURRED\",\"COMMON.ERROR\"]).subscribe(res=>{this.error=res[\"MESSAGE.ERROR_OCCURRED\"]})}}}sendPassword(){try{const user=new app_models.M;user.userName=this.loginForm.controls.userName.value,console.log(\"Sending password for user: \"+user.userName),null===user.userName||\"\"===user.userName?this.translate.get([\"VALIDATION.USER_NAME_REQUIRED\",\"COMMON.ERROR\"]).subscribe(res=>{this.error=res[\"VALIDATION.USER_NAME_REQUIRED\"]}):this.appService.resetPassword(user).subscribe(()=>{this.translate.get([\"MESSAGE.PASSWORD_SENT\",\"COMMON.SUCCESS\"]).subscribe(res=>{this.error=res[\"MESSAGE.PASSWORD_SENT\"]})})}catch(e){this.translate.get([\"MESSAGE.ERROR_OCCURRED\",\"COMMON.ERROR\"]).subscribe(res=>{this.error=res[\"MESSAGE.ERROR_OCCURRED\"]})}}}return LoginComponent.ɵfac=function(t){return new(t||LoginComponent)(core[\"ɵɵdirectiveInject\"](fesm2015_forms.d),core[\"ɵɵdirectiveInject\"](router.d),core[\"ɵɵdirectiveInject\"](token_storage.a),core[\"ɵɵdirectiveInject\"](ngx_translate_core.d),core[\"ɵɵdirectiveInject\"](app_service.a),core[\"ɵɵdirectiveInject\"](router.a))},LoginComponent.ɵcmp=core[\"ɵɵdefineComponent\"]({type:LoginComponent,selectors:[[\"app-login\"]],decls:45,vars:31,consts:[[1,\"p-3\"],[1,\"theme-container\"],[\"fxLayout\",\"row\",\"fxLayoutAlign\",\"center center\",1,\"my-3\"],[\"fxLayout\",\"column\",\"fxLayoutAlign\",\"center center\",1,\"text-center\"],[1,\"uppercase\"],[\"mat-button\",\"\",\"color\",\"accent\",1,\"w-100\",3,\"routerLink\"],[3,\"formGroup\",\"ngSubmit\"],[\"appearance\",\"outline\",1,\"w-100\",\"mt-2\"],[\"matPrefix\",\"\",1,\"mr-1\",\"text-muted\"],[\"matInput\",\"\",\"placeholder\",\"Email\",\"formControlName\",\"email\",\"required\",\"\"],[4,\"ngIf\"],[\"appearance\",\"outline\",1,\"w-100\",\"mt-1\"],[\"matInput\",\"\",\"placeholder\",\"Password\",\"formControlName\",\"password\",\"required\",\"\",3,\"type\"],[\"mat-icon-button\",\"\",\"matSuffix\",\"\",\"type\",\"button\",1,\"text-muted\",3,\"click\"],[1,\"text-center\",\"mt-2\"],[\"mat-raised-button\",\"\",\"color\",\"accent\",\"type\",\"submit\",1,\"uppercase\"],[\"fxLayout\",\"column\",\"fxLayoutAlign\",\"center center\",\"class\",\"text-center\",4,\"ngIf\"],[\"fxLayoutAlign\",\"end center\"],[\"mat-button\",\"\",3,\"click\"],[1,\"text-muted\"],[1,\"mx-1\"],[\"mat-button\",\"\",\"color\",\"accent\",1,\"w-100\"]],template:function(rf,ctx){1&rf&&(core[\"ɵɵelementStart\"](0,\"div\",0),core[\"ɵɵelementStart\"](1,\"div\",1),core[\"ɵɵelementStart\"](2,\"div\",2),core[\"ɵɵelementStart\"](3,\"mat-card\"),core[\"ɵɵelementStart\"](4,\"div\",3),core[\"ɵɵelementStart\"](5,\"h1\",4),core[\"ɵɵtext\"](6),core[\"ɵɵpipe\"](7,\"translate\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](8,\"a\",5),core[\"ɵɵtext\"](9),core[\"ɵɵpipe\"](10,\"translate\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](11,\"form\",6),core[\"ɵɵlistener\"](\"ngSubmit\",(function(){return ctx.login(ctx.loginForm.value)})),core[\"ɵɵelementStart\"](12,\"mat-form-field\",7),core[\"ɵɵelementStart\"](13,\"mat-icon\",8),core[\"ɵɵtext\"](14,\"person\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](15,\"mat-label\"),core[\"ɵɵtext\"](16),core[\"ɵɵpipe\"](17,\"translate\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelement\"](18,\"input\",9),core[\"ɵɵtemplate\"](19,LoginComponent_mat_error_19_Template,3,3,\"mat-error\",10),core[\"ɵɵtemplate\"](20,LoginComponent_mat_error_20_Template,3,3,\"mat-error\",10),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](21,\"mat-form-field\",11),core[\"ɵɵelementStart\"](22,\"mat-icon\",8),core[\"ɵɵtext\"](23,\"lock\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](24,\"mat-label\"),core[\"ɵɵtext\"](25),core[\"ɵɵpipe\"](26,\"translate\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelement\"](27,\"input\",12),core[\"ɵɵtemplate\"](28,LoginComponent_mat_error_28_Template,3,3,\"mat-error\",10),core[\"ɵɵtemplate\"](29,LoginComponent_mat_error_29_Template,3,3,\"mat-error\",10),core[\"ɵɵelementStart\"](30,\"button\",13),core[\"ɵɵlistener\"](\"click\",(function(){return ctx.hide=!ctx.hide})),core[\"ɵɵelementStart\"](31,\"mat-icon\"),core[\"ɵɵtext\"](32),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](33,\"div\",14),core[\"ɵɵelementStart\"](34,\"button\",15),core[\"ɵɵtext\"](35),core[\"ɵɵpipe\"](36,\"translate\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵtemplate\"](37,LoginComponent_div_37_Template,3,1,\"div\",16),core[\"ɵɵelementStart\"](38,\"mat-card-actions\",17),core[\"ɵɵelementStart\"](39,\"button\",18),core[\"ɵɵlistener\"](\"click\",(function(){return ctx.sendPassword()})),core[\"ɵɵelementStart\"](40,\"mat-icon\",19),core[\"ɵɵtext\"](41,\"vpn_key\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](42,\"span\",20),core[\"ɵɵtext\"](43),core[\"ɵɵpipe\"](44,\"translate\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"]()),2&rf&&(core[\"ɵɵadvance\"](3),core[\"ɵɵstyleProp\"](\"max-width\",500,\"px\"),core[\"ɵɵadvance\"](3),core[\"ɵɵtextInterpolate\"](core[\"ɵɵpipeBind1\"](7,17,\"COMMON.SIGN_IN\")),core[\"ɵɵadvance\"](2),core[\"ɵɵproperty\"](\"routerLink\",core[\"ɵɵpureFunction1\"](29,_c0,ctx.action)),core[\"ɵɵadvance\"](1),core[\"ɵɵtextInterpolate\"](core[\"ɵɵpipeBind1\"](10,19,\"COMMON.NEW_REGISTER\")),core[\"ɵɵadvance\"](2),core[\"ɵɵproperty\"](\"formGroup\",ctx.loginForm),core[\"ɵɵadvance\"](5),core[\"ɵɵtextInterpolate\"](core[\"ɵɵpipeBind1\"](17,21,\"COMMON.E_MAIL\")),core[\"ɵɵadvance\"](3),core[\"ɵɵproperty\"](\"ngIf\",null==ctx.loginForm.controls.email.errors?null:ctx.loginForm.controls.email.errors.required),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",ctx.loginForm.controls.email.hasError(\"invalidEmail\")),core[\"ɵɵadvance\"](5),core[\"ɵɵtextInterpolate\"](core[\"ɵɵpipeBind1\"](26,23,\"COMMON.PASSWORD\")),core[\"ɵɵadvance\"](2),core[\"ɵɵproperty\"](\"type\",ctx.hide?\"password\":\"text\"),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",null==ctx.loginForm.controls.password.errors?null:ctx.loginForm.controls.password.errors.required),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",ctx.loginForm.controls.password.hasError(\"minlength\")),core[\"ɵɵadvance\"](3),core[\"ɵɵtextInterpolate\"](ctx.hide?\"visibility_off\":\"visibility\"),core[\"ɵɵadvance\"](3),core[\"ɵɵtextInterpolate1\"](\" \",core[\"ɵɵpipeBind1\"](36,25,\"COMMON.SIGN_IN\"),\" \"),core[\"ɵɵadvance\"](2),core[\"ɵɵproperty\"](\"ngIf\",ctx.error),core[\"ɵɵadvance\"](6),core[\"ɵɵtextInterpolate\"](core[\"ɵɵpipeBind1\"](44,27,\"MESSAGE.SEND_PASSWORD\")))},directives:[flex.c,flex.b,card.a,fesm2015_button.a,router.g,fesm2015_forms.u,fesm2015_forms.n,fesm2015_forms.g,form_field.c,icon.a,form_field.g,form_field.f,input.b,fesm2015_forms.b,fesm2015_forms.m,fesm2015_forms.f,fesm2015_forms.s,common.NgIf,fesm2015_button.b,form_field.h,card.b,form_field.b],pipes:[ngx_translate_core.c],styles:[\".auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}\"]}),LoginComponent})(),pathMatch:\"full\"}];let login_module_LoginModule=(()=>{class LoginModule{}return LoginModule.ɵmod=core[\"ɵɵdefineNgModule\"]({type:LoginModule}),LoginModule.ɵinj=core[\"ɵɵdefineInjector\"]({factory:function(t){return new(t||LoginModule)},imports:[[common.CommonModule,router.h.forChild(routes),shared_module.a,ngx_translate_core.b]]}),LoginModule})()}}]);","extractedComments":[]}