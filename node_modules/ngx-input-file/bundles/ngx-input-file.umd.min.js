!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@angular/common"),require("@angular/material/button"),require("@angular/material/form-field"),require("@angular/material/icon"),require("@angular/material/input")):"function"==typeof define&&define.amd?define("ngx-input-file",["exports","@angular/core","@angular/forms","@angular/common","@angular/material/button","@angular/material/form-field","@angular/material/icon","@angular/material/input"],t):t((e=e||self)["ngx-input-file"]={},e.ng.core,e.ng.forms,e.ng.common,e.ng.material.button,e.ng.material["form-field"],e.ng.material.icon,e.ng.material.input)}(this,function(e,t,i,n,o,r,a,l){"use strict";function c(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function p(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}var u,f="bounce-in",d="*",m=1,g="add",h="delete",b="insert_drive_file",y="link",v=!1,k="Link",F=null;!function(e){e[e.badFile=0]="badFile",e[e.limitReached=1]="limitReached",e[e.sizeReached=2]="sizeReached"}(u||(u={}));var O=function(){function e(e){this._config=e}var i,n;return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),e.prototype.limitGuard=function(e,t){return e.length<t},e.prototype.sizeGuard=function(e,t){return!t||e.size<1024*t*1024},e.prototype.typeGuard=function(e,t){var i,n,o=null==t;if(t){var r=t.replace("*","").split(",");try{for(var a=p(r),l=a.next();!l.done;l=a.next()){var c=l.value;if(e.type.startsWith(c)||"."===c.charAt(0)&&null!=e.name&&e.name.endsWith(c)){o=!0;break}}}catch(e){i={error:e}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}}return o},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject("config"))},token:e,providedIn:"root"}),e=c([t.Injectable({providedIn:"root"}),(i=0,n=t.Inject("config"),function(e,t){n(e,t,i)}),s("design:paramtypes",[Object])],e)}();function w(e){if(null!=i.Validators.required(e))return null;var t=e.value;return/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(t)?null:{url:!0}}var L=function(){function e(e,i){this.formBuilder=e,this.inputFileService=i,this.acceptedFile=new t.EventEmitter,this.deletedFile=new t.EventEmitter,this.rejectedFile=new t.EventEmitter,this.files=new Array,this.id="ngx-input-file-"+n.nextId++,this.onChange=function(e){},this.onTouched=function(){}}var n;return n=e,Object.defineProperty(e.prototype,"classAnimation",{get:function(){return this._classAnimation||this.inputFileService.config.classAnimation||f},set:function(e){this._classAnimation=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fileAccept",{get:function(){return this._fileAccept||this.inputFileService.config.fileAccept||d},set:function(e){this._fileAccept=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fileLimit",{get:function(){return this._fileLimit||this.inputFileService.config.fileLimit||m},set:function(e){this._fileLimit=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconAdd",{get:function(){return this._iconAdd||this.inputFileService.config.iconAdd||g},set:function(e){this._iconAdd=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconDelete",{get:function(){return this._iconDelete||this.inputFileService.config.iconDelete||h},set:function(e){this._iconDelete=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconFile",{get:function(){return this._iconFile||this.inputFileService.config.iconFile||b},set:function(e){this._iconFile=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconLink",{get:function(){return this._iconLink||this.inputFileService.config.iconLink||y},set:function(e){this._iconLink=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"linkEnabled",{get:function(){return this._linkEnabled||this.inputFileService.config.linkEnabled||v},set:function(e){this._linkEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholderLink",{get:function(){return this._placeholderLink||this.inputFileService.config.placeholderLink||k},set:function(e){this._placeholderLink=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sizeLimit",{get:function(){return this._sizeLimit||this.inputFileService.config.sizeLimit||F},set:function(e){this._sizeLimit=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canAddFile",{get:function(){return this.files&&this.files.length<this.fileLimit},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.setForm()},e.prototype.onDeleteFile=function(e){if(!this.disabled){var t=this.files.slice();this.deletedFile.emit(t[e]),t.splice(e,1),this.writeValue(t)}},e.prototype.onDragOver=function(e){e.ripple.launch({centered:!0,persistent:!0})},e.prototype.onDragLeave=function(e){e.ripple.fadeOutAll()},e.prototype.onLink=function(){this.addLink=!this.addLink},e.prototype.onReplaceFile=function(e,t,i,n){if(!this.disabled){var o=this.files.slice(),r={file:e.item(0)};i.ripple.fadeOutAll(),this.fileGuard(o,r,!0)&&(o[t]=r,this.acceptedFile.emit(r)),this.writeValue(o),n&&(n.value="")}},e.prototype.onSelectFile=function(e,t){var i=this;if(!this.disabled){t.ripple.fadeOutAll();var n=this.files.slice();Array.from(e).forEach(function(e){var t={file:e};i.fileGuard(n,t)&&(n.push(t),i.acceptedFile.emit(t))}),this.writeValue(n),this.fileInput.nativeElement.value=""}},e.prototype.onSubmitLink=function(){if(!this.disabled&&this.form.valid){var e=this.files.slice(),t={link:this.form.value.link,preview:this.form.value.link};e.push(t),this.acceptedFile.emit(t),this.onLink(),this.form.reset(),this.writeValue(e)}},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this.disabled=e},e.prototype.writeValue=function(e){e||(e=new Array),this.files=e,this.setFilePreview(),this.onChange(this.files)},e.prototype.fileGuard=function(e,t,i){return i||this.inputFileService.limitGuard(e,this.fileLimit)?this.inputFileService.sizeGuard(t.file,this.sizeLimit)?!!this.inputFileService.typeGuard(t.file,this.fileAccept)||(this.rejectedFile.emit({reason:u.badFile,file:t}),!1):(this.rejectedFile.emit({reason:u.sizeReached,file:t}),!1):(this.rejectedFile.emit({reason:u.limitReached,file:t}),!1)},e.prototype.setFilePreview=function(){var e=this,t=function(t){if(null!=i.files[t].file&&i.inputFileService.typeGuard(i.files[t].file,"image/*")){var n=new FileReader;n.onload=function(){e.files[t].preview=n.result},n.readAsDataURL(i.files[t].file)}},i=this;for(var n in this.files)t(n)},e.prototype.setForm=function(){this.form=this.formBuilder.group({link:["",[i.Validators.required,w]]})},e.nextId=0,c([t.Input(),s("design:type",Boolean)],e.prototype,"disabled",void 0),c([t.Input(),s("design:type",String)],e.prototype,"placeholder",void 0),c([t.Input(),s("design:type",String),s("design:paramtypes",[String])],e.prototype,"classAnimation",null),c([t.Input(),s("design:type",String),s("design:paramtypes",[String])],e.prototype,"fileAccept",null),c([t.Input(),s("design:type",Number),s("design:paramtypes",[Number])],e.prototype,"fileLimit",null),c([t.Input(),s("design:type",String),s("design:paramtypes",[String])],e.prototype,"iconAdd",null),c([t.Input(),s("design:type",String),s("design:paramtypes",[String])],e.prototype,"iconDelete",null),c([t.Input(),s("design:type",String),s("design:paramtypes",[String])],e.prototype,"iconFile",null),c([t.Input(),s("design:type",String),s("design:paramtypes",[String])],e.prototype,"iconLink",null),c([t.Input(),s("design:type",Boolean),s("design:paramtypes",[Boolean])],e.prototype,"linkEnabled",null),c([t.Input(),s("design:type",String),s("design:paramtypes",[String])],e.prototype,"placeholderLink",null),c([t.Input(),s("design:type",Number),s("design:paramtypes",[Number])],e.prototype,"sizeLimit",null),c([t.Output(),s("design:type",Object)],e.prototype,"acceptedFile",void 0),c([t.Output(),s("design:type",Object)],e.prototype,"deletedFile",void 0),c([t.Output(),s("design:type",Object)],e.prototype,"rejectedFile",void 0),c([t.ViewChild("fileInput",{static:!1}),s("design:type",t.ElementRef)],e.prototype,"fileInput",void 0),e=n=c([t.Component({selector:"input-file",template:'<div class="input-file-container">\n    <label class="mat-orphan-label" [for]="id" [class.active]="files?.length" [innerHtml]="placeholder" *ngIf="placeholder"></label>\n    <div class="files-container">\n\n        <ng-container *ngFor="let file of files; let i = index">\n            <div class="file-container" [ngClass]="classAnimation">\n                <ng-container *ngTemplateOutlet="fileTemplate; context: { $implicit: file, index: i }"></ng-container>\n            </div>\n        </ng-container>\n\n        <ng-container *ngIf="canAddFile">\n            <div class="file-container">\n                <ng-container *ngIf="!addLink; else linkTemplate">\n                    <ng-container *ngTemplateOutlet="addTemplate"></ng-container>\n                </ng-container>\n            </div>\n        </ng-container>\n    </div>\n\n</div>\n\n<ng-template #addTemplate>\n    <button mat-button inputFileDropZone class="file-button" type="button" (click)="fileInput.click()" (itemDrop)="onSelectFile($event, selectButton)"\n        (itemDragOver)="onDragOver(selectButton)" (itemDragLeave)="onDragLeave(selectButton)" [disabled]="disabled" #selectButton>\n        <mat-icon class="input-icon">{{ iconAdd }}</mat-icon>\n    </button>\n    <button mat-button class="secondary-button" type="button" [disabled]="disabled" (click)="onLink()" *ngIf="linkEnabled">\n        <mat-icon>{{ iconLink }}</mat-icon>\n    </button>\n    <input [id]="id" [accept]="fileAccept" hidden type="file" [attr.multiple]="fileLimit > 1 ? true : null" #fileInput (change)="onSelectFile($event.target.files, selectButton)">\n</ng-template>\n\n<ng-template #fileTemplate let-file let-index="index">\n    <img class="image-preview" [src]="file.preview" *ngIf="file.preview">\n    <button mat-button inputFileDropZone class="replace-button" type="button" (click)="fileReplace.click()" (itemDrop)="onReplaceFile($event, index, replaceButton)"\n        [disabled]="disabled" (itemDragOver)="onDragOver(replaceButton)" (itemDragLeave)="onDragLeave(replaceButton)" #replaceButton>\n        <ng-container *ngIf="!file.preview">\n            <mat-icon class="input-icon">{{ iconFile }}</mat-icon>\n            <div class="file-name text-truncate" [innerHtml]="file.file.name" *ngIf="file.file"></div>\n        </ng-container>\n    </button>\n    <button mat-button class="secondary-button" type="button" (click)="onDeleteFile(index)" [disabled]="disabled">\n        <mat-icon>{{ iconDelete }}</mat-icon>\n    </button>\n    <input [accept]="fileAccept" hidden type="file" #fileReplace (change)="onReplaceFile($event.target.files, index, replaceButton, fileReplace)">\n</ng-template>\n\n<ng-template #linkTemplate>\n    <form class="form-link slide-in-up" [formGroup]="form" (ngSubmit)="onSubmitLink()" novalidate>\n        <mat-form-field class="input-link">\n            <input matInput formControlName="link" [placeholder]="placeholderLink">\n        </mat-form-field>\n        <div class="form-link-button">\n            <button mat-button type="button" (click)="onLink()" [disabled]="disabled">\n                <mat-icon>arrow_back</mat-icon>\n            </button>\n            <button mat-button type="submit" [disabled]="disabled">\n                <mat-icon>check</mat-icon>\n            </button>\n        </div>\n    </form>\n</ng-template>',providers:[{provide:i.NG_VALUE_ACCESSOR,useExisting:t.forwardRef(function(){return n}),multi:!0}],styles:[".input-file-container{position:relative}.input-file-container .files-container{display:flex;flex-direction:row;flex-wrap:wrap;padding-top:1.25rem}.input-file-container .file-button,.input-file-container .file-container{align-items:center;display:flex;height:10rem;justify-content:center;width:10rem}.input-file-container .secondary-button{width:10rem}.input-file-container .file-button{flex:1}.input-file-container .file-container{flex-direction:column;margin-right:1rem;overflow:hidden}.input-file-container .replace-button{flex:1;width:10rem}.input-file-container .mat-button:focus{outline:0}.input-file-container .file-name{width:calc(10rem - 2.5rem)}.input-file-container .image-preview{position:absolute;height:10rem;-o-object-fit:contain;object-fit:contain;width:10rem}.input-file-container .input-icon{font-size:calc(10rem / 4);height:calc(10rem / 4);width:calc(10rem / 4)}.input-file-container .form-link{display:flex;flex-direction:column;width:10rem}.input-file-container .input-link{width:10rem}.input-file-container .form-link-button{display:flex;flex-direction:row}.input-file-container .form-link-button .mat-button{min-width:calc(10rem / 2);width:calc(10rem / 2)}.input-file-container .mat-orphan-label{color:rgba(0,0,0,.54);display:block;font-size:1rem;left:0;margin:0;position:absolute;top:0;transform-origin:0;transition:.4s cubic-bezier(.25,.8,.25,1),width .4s cubic-bezier(.25,.8,.25,1)}.input-file-container .mat-orphan-label.active{transform:scale(.75)}@-webkit-keyframes bounceIn{20%,40%,60%,80%,from,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:scale3d(.3,.3,.3)}20%{transform:scale3d(1.1,1.1,1.1)}40%{transform:scale3d(.9,.9,.9)}60%{opacity:1;transform:scale3d(1.03,1.03,1.03)}80%{transform:scale3d(.97,.97,.97)}to{opacity:1;transform:scale3d(1,1,1)}}@keyframes bounceIn{20%,40%,60%,80%,from,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:scale3d(.3,.3,.3)}20%{transform:scale3d(1.1,1.1,1.1)}40%{transform:scale3d(.9,.9,.9)}60%{opacity:1;transform:scale3d(1.03,1.03,1.03)}80%{transform:scale3d(.97,.97,.97)}to{opacity:1;transform:scale3d(1,1,1)}}.bounce-in{-webkit-animation-duration:.75s;animation-duration:.75s;-webkit-animation-name:bounceIn;animation-name:bounceIn}@-webkit-keyframes slideInUp{from{opacity:0;transform:translate3d(0,100%,0)}to{opacity:1;transform:translate3d(0,0,0)}}@keyframes slideInUp{from{opacity:0;transform:translate3d(0,100%,0)}to{opacity:1;transform:translate3d(0,0,0)}}.slide-in-up{-webkit-animation-duration:.25s;animation-duration:.25s;-webkit-animation-name:slideInUp;animation-name:slideInUp}"]}),s("design:paramtypes",[i.FormBuilder,O])],e)}(),S=function(){function e(){this.disabled=!1,this.itemDragOver=new t.EventEmitter,this.itemDragLeave=new t.EventEmitter,this.itemDrop=new t.EventEmitter,this.whiteListClasses=["file-button","mat-button-wrapper","input-icon"]}return e.prototype.onDragOver=function(e){this.preventAndStopEventPropagation(e),this.isOver||this.disabled||(this.isOver=!0,this.itemDragOver.emit())},e.prototype.onDragLeave=function(e){this.preventAndStopEventPropagation(e),this.isOver&&this.isTrueLeave(e)&&!this.disabled&&(this.isOver=!1,this.itemDragLeave.emit())},e.prototype.onDrop=function(e){if(!this.disabled){this.preventAndStopEventPropagation(e),this.isOver=!1;try{this.itemDrop.emit(e.dataTransfer.files)}catch(e){console.error(e)}}},e.prototype.preventAndStopEventPropagation=function(e){e.preventDefault(),e.stopPropagation()},e.prototype.isTrueLeave=function(e){var t,i;try{for(var n=p(this.whiteListClasses),o=n.next();!o.done;o=n.next()){var r=o.value;if(null!=e.fromElement&&e.fromElement.className.indexOf(r)>=0)return!1}}catch(e){t={error:e}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return!0},c([t.Input(),s("design:type",Object)],e.prototype,"disabled",void 0),c([t.Output(),s("design:type",Object)],e.prototype,"itemDragOver",void 0),c([t.Output(),s("design:type",Object)],e.prototype,"itemDragLeave",void 0),c([t.Output(),s("design:type",Object)],e.prototype,"itemDrop",void 0),c([t.HostListener("dragover",["$event"]),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],e.prototype,"onDragOver",null),c([t.HostListener("dragleave",["$event"]),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],e.prototype,"onDragLeave",null),c([t.HostListener("drop",["$event"]),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],e.prototype,"onDrop",null),e=c([t.Directive({selector:"[inputFileDropZone]"})],e)}(),I=function(){function e(){}var s;return s=e,e.forRoot=function(e){return{ngModule:s,providers:[O,{provide:"config",useValue:e}]}},e=s=c([t.NgModule({declarations:[S,L],imports:[n.CommonModule,i.FormsModule,o.MatButtonModule,r.MatFormFieldModule,a.MatIconModule,l.MatInputModule,i.ReactiveFormsModule],exports:[L],providers:[O],entryComponents:[L]})],e)}();e.InputFileComponent=L,e.InputFileModule=I,e.InputFileService=O,e.ɵa=S,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-input-file.umd.min.js.map