{"version":3,"file":"ngx-progressbar-router.js","sources":["ng:/ngx-progressbar/router/ng-progress-router.interface.ts","ng:/ngx-progressbar/router/ng-progress-router.service.ts","ng:/ngx-progressbar/router/ng-progress-router.module.ts","ng:/ngx-progressbar/router/ngx-progressbar-router.ts"],"names":[],"mappings":"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","sourcesContent":["import { InjectionToken, Type } from '@angular/core';\nimport { RouterEvent } from '@angular/router';\n\nexport interface NgProgressRouterConfig {\n  id?: string;\n  delay?: number;\n  startEvents?: Type<RouterEvent>[];\n  completeEvents?: Type<RouterEvent>[];\n}\n\nexport const NG_PROGRESS_ROUTER_CONFIG = new InjectionToken<NgProgressRouterConfig>('ngProgressRouterConfig');\n","import { Injectable, Optional, Inject, Type } from '@angular/core';\nimport { Router, NavigationStart, NavigationEnd, NavigationCancel, NavigationError, RouterEvent } from '@angular/router';\nimport { of } from 'rxjs';\nimport { tap, delay, switchMap, filter } from 'rxjs/operators';\nimport { NgProgress } from 'ngx-progressbar';\n// import { NgProgress } from '../../src/public-api';\nimport { NgProgressRouterConfig, NG_PROGRESS_ROUTER_CONFIG } from './ng-progress-router.interface';\n\n/**\n * Check if a router event type exists in an array of router event types\n * @param routerEvent\n * @param events\n */\nfunction eventExists(routerEvent: RouterEvent, events: Type<RouterEvent>[]) {\n  let res = false;\n  events.map((event: Type<RouterEvent>) => res = res || routerEvent instanceof event);\n  return res;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgProgressRouter {\n  private readonly _config: NgProgressRouterConfig = {\n    id: 'root',\n    delay: 0,\n    startEvents: [NavigationStart],\n    completeEvents: [NavigationEnd, NavigationCancel, NavigationError]\n  };\n\n  constructor(progress: NgProgress, router: Router, @Optional() @Inject(NG_PROGRESS_ROUTER_CONFIG) config: NgProgressRouterConfig) {\n    this._config = config ? {...this._config, ...config} : this._config;\n    const progressRef = progress.ref(this._config.id);\n\n    const startProgress = of({}).pipe(\n      tap(() => progressRef.start())\n    );\n\n    const completeProgress = of({}).pipe(\n      delay(this._config.delay),\n      tap(() => progressRef.complete())\n    );\n\n    const filterEvents = [...this._config.startEvents, ...this._config.completeEvents];\n\n    router.events.pipe(\n      filter((event: RouterEvent) => eventExists(event, filterEvents)),\n      switchMap((event: RouterEvent) => eventExists(event, this._config.startEvents) ? startProgress : completeProgress)\n    ).subscribe();\n  }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { NgProgressRouterConfig, NG_PROGRESS_ROUTER_CONFIG } from './ng-progress-router.interface';\nimport { NgProgressRouter } from './ng-progress-router.service';\n\n@NgModule({})\nexport class NgProgressRouterModule {\n\n  // Inject the service to activate it\n  constructor(ngProgressRouter: NgProgressRouter) {\n  }\n\n  static withConfig(config: NgProgressRouterConfig): ModuleWithProviders<NgProgressRouterModule> {\n    return {\n      ngModule: NgProgressRouterModule,\n      providers: [\n        { provide: NG_PROGRESS_ROUTER_CONFIG, useValue: config }\n      ]\n    };\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n\nexport {NgProgressRouter as Éµa} from './ng-progress-router.service';"]}